<div id="content">
	<div class="page-header">
	<h1>Configurações da Formatura
	</h1>
	</div><!-- /.page-header -->
	<br />
		
	<form id="zgFormID" class="form-horizontal">
		<input type="hidden" id="codOrganizacaoID" name="codOrganizacao" value="%COD_ORGANIZACAO%">
		<input type="hidden" id="valID" name="validado">

		<div class="row">
			<div class="form-group col-sm-12" id="divDiaVencimentoID">
			    <label for="identID" class="col-sm-3 control-label">Dia do Vencimento das Mensalidades</label>
	    		<div class="input-group col-sm-5 pull-left">
    				<span class="input-group-addon"><i class="ace-icon fa fa-question-circle" data-rel="popover" data-placement="top" data-trigger="hover" data-original-title="<i class='ace-icon fa fa-question-circle red'></i> Ajuda" data-content="Informe um valor que será acrescido as mensalidades do formando, esse valor não é obrigatório"></i></span>
					<select class="select2" style="width:100%;" id="diaVencimentoID" name="diaVencimento" data-rel="select2">
					%DIAS_VENC%
					</select>
			    </div>
			    <div class="col-sm-1 pull-left" id="divHelpDiaVencimentoID"></div>
			</div>
			<div class="form-group col-sm-12" id="divValorPorFormandoID">
			    <label for="identID" class="col-sm-3 control-label">Valor Por Formando</label>
	    		<div class="input-group col-sm-5 pull-left">
    				<span class="input-group-addon"><i class="ace-icon fa fa-question-circle" data-rel="popover" data-placement="top" data-trigger="hover" data-original-title="<i class='ace-icon fa fa-question-circle red'></i> Ajuda" data-content="Informe um valor que será acrescido as mensalidades do formando, esse valor não é obrigatório"></i></span>
		    		<input class="form-control" id="valorPorFormandoID" type="text" name="valorPorFormando" maxlength="60" value="%VALOR_FORMANDO%" placeholder="Valor por Formando" autocomplete="off" zg-data-toggle="mask" zg-data-mask="dinheiro">
			    </div>
			    <div class="col-sm-1 pull-left" id="divHelpValorPorFormandoID"></div>
			</div>
			<div class="form-group col-sm-12" id="divValorPorBoletoID">
		    	<label for="nomeID" class="col-sm-3 control-label" >Taxa do Boleto</label>
    			<div class="input-group col-sm-5 pull-left">
   					<span class="input-group-addon"><i class="ace-icon fa fa-question-circle" data-rel="popover" data-placement="top" data-trigger="hover" data-original-title="<i class='ace-icon fa fa-question-circle red'></i> Ajuda" data-content="Informe o valor cobrado pelo banco para emitir um boleto, esse valor será incorporado a mensalidade do formando"></i></span>
	    			<input class="form-control" id="valorPorBoletoID" type="text" name="valorPorBoleto" placeholder="Valor Por Boleto" maxlength="100" value="%VALOR_BOLETO%" autocomplete="off" zg-data-toggle="mask" zg-data-mask="dinheiro">
		    	</div>
		    	<div class="col-sm-1 pull-left" id="divHelpValorPorBoletoID"></div>
		    </div>
		    <div class="form-group col-sm-12" id="divTaxaPorFormandoID">
		    	<label class="col-sm-3 control-label" for="instituicaoID">Taxa de Uso do sistema (por Formando)</label>
				<div class="input-group col-sm-5 pull-left">
	    			<span class="input-group-addon"><i class="ace-icon fa fa-question-circle" data-rel="popover" data-placement="top" data-trigger="hover" data-original-title="<i class='ace-icon fa fa-question-circle red'></i> Ajuda" data-content="Taxa cobrada pelo (suaFormatura) para uso do sistema."></i></span>
					<input class="form-control" id="taxaPorFormandoID" disabled readonly type="text" name="taxaPorFormando" placeholder="Valor Por Boleto" maxlength="100" value="%TAXA_FORMANDO%" autocomplete="off" zg-data-toggle="mask" zg-data-mask="dinheiro">
				</div>
		    	<div class="col-sm-1 pull-left" id="divHelpTaxaPorFormandoID"></div>
			</div>
	    </div>
		<div id="divMsgFmtConfID"></div>
	    
	</form>

	<hr />
	<div class="clearfix form-actions">
		<label class="col-sm-4 control-label">&nbsp;</label>
		<button type="button" class="btn btn-primary" id="btnSalvarFormaturaConfID">
			<i class="fa fa-check bigger-110"></i> Salvar
		</button>
	</div>
</div>

<script>
//Datepicker - Calendário
$('.datepicker').datepicker({autoclose: true,todayHighlight: true,todayBtn: true});
//Mascaras
$('[zg-data-toggle="mask"]').each(function( index ) {
	zgMask($( this ), $( this ).attr('zg-data-mask'));
});
//Mensagens
$('[data-rel=tooltip]').tooltip();
$('[data-rel=popover]').popover({html:true});

$('[data-rel="select2"]').each(function( index ) {
	$(this).select2({allowClear: true});
	if ($(this).hasClass('readonly')) {
		$(this).select2("readonly", true);
	}
});


$('#btnSalvarFormaturaConfID').on("click", function(e) {
	$('#zgFormID').submit();
});

$('#zgFormID').submit(function(e) {
	// Retirar a máscara para os campos que estão configurados para tal 
	$('[zg-data-mask-retira="1"]').each(function( index ) {
		$( this ).val($( this ).cleanVal());
	});
	
	$.ajax({
		type:	"POST", 
		url:	"%DP%",
		data:	$('#zgFormID').serialize(),
	}).done(function( data, textStatus, jqXHR) {
		if (checaRetornoOK(data) == true) {
			zgMostraMsg('divMsgFmtConfID',zgGetMsgRetorno(data));
		}else{
			zgMostraErro('divMsgFmtConfID',zgGetMsgRetorno(data));
		}
		
		$('#zgDivModalID').on('hidden.bs.modal', function () {
			$('#zgDivModalID').off('hidden.bs.modal');
		});
		
	}).fail(function( jqXHR, textStatus, errorThrown) {
		zgMostraAviso(null);
	});
	
	// Recolocar a máscara para os campos que estão configurados para tal
	$('[zg-data-mask-retira="1"]').each(function( index ) {
		zgMask($( this ), $( this ).attr('zg-data-mask'));
		$( this ).trigger('keyup');
	});
	
	return false; 
});


</script>