<!DOCTYPE html>
<html lang="pt-BR" >
<head>
	<title>Confirmação de usuário</title>
	<link rel="shortcut icon" href="%ICON_URL%/favicon.ico" />

	<!-- Carregado dinamicamente através do dinamicHtmlLoad -->
	<meta http-equiv="content-type" content="text/html; charset=UTF-8" />
	<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
	<style type="text/css" class="init">
		div.DTTT { margin-bottom: 0.5em; float: right; }
		div.dataTables_wrapper { clear: both; }
	</style>
	
	<link href="%PKG_URL%/ace/assets/css/bootstrap.css" media="screen" rel="stylesheet" type="text/css" />
	<link href="%PKG_URL%/ace/assets/css/font-awesome.css" media="screen" rel="stylesheet" type="text/css" />
	<link href="%PKG_URL%/ace/assets/css/dropzone.css" media="screen" rel="stylesheet" type="text/css" />
	<link href="%PKG_URL%/ace/assets/css/jquery-ui.custom.css" media="screen" rel="stylesheet" type="text/css" />
	<link href="%PKG_URL%/ace/assets/css/chosen.css" media="screen" rel="stylesheet" type="text/css" />
	<link href="%PKG_URL%/ace/assets/css/datepicker.css" media="screen" rel="stylesheet" type="text/css" />
	<link href="%PKG_URL%/ace/assets/css/bootstrap-timepicker.css" media="screen" rel="stylesheet" type="text/css" />
	<link href="%PKG_URL%/ace/assets/css/daterangepicker.css" media="screen" rel="stylesheet" type="text/css" />
	<link href="%PKG_URL%/ace/assets/css/bootstrap-datetimepicker.css" media="screen" rel="stylesheet" type="text/css" />
	<link href="%PKG_URL%/ace/assets/css/colorpicker.css" media="screen" rel="stylesheet" type="text/css" />
	<link href="%PKG_URL%/ace/assets/css/jquery-ui.css" media="screen" rel="stylesheet" type="text/css" />
	<link href="%PKG_URL%/ace/assets/css/jquery.gritter.css" media="screen" rel="stylesheet" type="text/css" />
	<link href="%PKG_URL%/ace/assets/css/bootstrap-duallistbox.css" media="screen" rel="stylesheet" type="text/css"  />
	<link href="%PKG_URL%/ace/assets/css/bootstrap-multiselect.css" media="screen" rel="stylesheet" type="text/css"  />
	<link href="%PKG_URL%/ace/assets/css/select2.css" media="screen" rel="stylesheet" type="text/css" />
	<link href="%PKG_URL%/ace/assets/css/ace-fonts.css" media="screen" rel="stylesheet" type="text/css" />
	<link href="%PKG_URL%/ace/assets/css/ace.css" class="ace-main-stylesheet" id="main-ace-style" media="screen" rel="stylesheet" type="text/css" />
	<link href="%PKG_URL%/ace/assets/css/ace-skins.css" media="screen" rel="stylesheet" type="text/css" />
	<link href="%PKG_URL%/ace/assets/css/ace-rtl.css" media="screen" rel="stylesheet" type="text/css" />
	<link href="%PKG_URL%/ace/assets/css/colorbox.css" rel="stylesheet" />
		 
	<!--[if lte IE 9]>
		<link rel="stylesheet" href="%PKG_URL%/ace/assets/css/ace-part2.css" class="ace-main-stylesheet" />
	<![endif]-->

	<!--[if lte IE 9]>
		<link rel="stylesheet" href="%PKG_URL%/ace/assets/css/ace-ie.css" />
	<![endif]-->

	<script type="text/javascript" charset="UTF-8" src="%PKG_URL%/ace/assets/js/ace-extra.js"></script>
	<link href="%CSS_URL%/zgWeb.css" media="screen" rel="stylesheet" type="text/css" />
	
	<!--[if lt IE 9]>
		<script type="text/javascript" charset="UTF-8" src="%PKG_URL%/ace/assets/js/html5shiv.js"></script>
		<script type='text/javascript' charset='UTF-8' src="%PKG_URL%/ace/assets/js/respond.js"></script>
	<![endif]-->

	<!--[if !IE]> -->
	<script type="text/javascript">
		window.jQuery || document.write("<script src='%PKG_URL%/ace/assets/js/jquery.js'>"+"<"+"/script>");
	</script>

	<!-- <![endif]-->

	<!--[if IE]>
	<script type="text/javascript">
			window.jQuery || document.write("<script src='%PKG_URL%/ace/assets/js/jquery1x.js'>"+"<"+"/script>");
	</script>
	<![endif]-->
	<script type="text/javascript">
		if('ontouchstart' in document.documentElement) document.write("<script src='%PKG_URL%/ace/assets/js/jquery.mobile.custom.js'>"+"<"+"/script>");
	</script>

	<script type="text/javascript" charset="UTF-8" src="%PKG_URL%/zage/js/jquery.base64.min.js"></script>
	<script type="text/javascript" charset="UTF-8" src="%JS_URL%/zgWeb.js"></script>

	<script type="text/javascript" charset="UTF-8" src="%PKG_URL%/ace/assets/js/bootstrap.js"></script>
	
	<!--[if lte IE 8]>
		<script type="text/javascript" charset="UTF-8" src="%PKG_URL%/ace/assets/js/excanvas.js"></script>
	<![endif]-->
	

	<!-- Fim do carregamento dinâmico (dinamicHtmlLoad) -->
	
	<!-- DataTables TableTool -->
	<!-- <link href="%PKG_URL%/TableTools-2.2.3/css/dataTables.tableTools.min.css" media="screen" rel="stylesheet" type="text/css" />  -->

	<!-- Vakata JSTree -->
	<link href="%PKG_URL%/vakata-jstree/dist/themes/zage/style.css" media="screen" rel="stylesheet" type="text/css" />
	<link href="%PKG_URL%/vakata-jstree/dist/themes/zage/zage.css" media="screen" rel="stylesheet" type="text/css" />
</head>
<body class="no-skin">


<div id="navbar" class="navbar navbar-default">
	<script type="text/javascript">
		try{ace.settings.check('navbar' , 'fixed')}catch(e){}
	</script>

	<div id="navbar" class="navbar navbar-default">
		<script type="text/javascript">
			try{ace.settings.check('navbar' , 'fixed')}catch(e){}
		</script>
		<div class="navbar-container" id="navbar-container">
			<div class="navbar-header pull-left">
				<a href="#" class="navbar-brand">
					<small>
						<i class="fa fa-graduation-cap"></i>
						suaFormatura.com
					</small>
				</a>
			</div>	
		</div><!-- /.navbar-container -->
	</div>
</div>

<div class="page-content">
	<div id="user-profile-3" class="user-profile row">
		<div class="page-header"><h1>Seja bem vindo<small><i class="ace-icon fa fa-angle-double-right"></i> Confirme seus dados para acessar o portal da sua formatura</small></h1></div>
		<div class="col-sm-12">
		<form id="zgFormAlteraSenhaID" class="form-horizontal">
			<input type="hidden" name="_cdu01" value="%CD01%">
			<input type="hidden" name="_cdu02" value="%CD02%">
			<input type="hidden" name="_cdu03" value="%CD03%">
			<input type="hidden" name="_cdu04" value="%CD04%">
			<div class="tabbable">
				<div class="vspace-xs"></div>
				<div class="row">
					<div id="divMsgID">
	    			</div>
					<div class="col-sm-8">
						<div id="divNovaSenhaID" class="form-group">
					    	<label class="col-sm-4 control-label" for="senhaID">Nova Senha</label>
			    			<div class="input-group col-sm-2">
				    			<span class="input-group-addon"><i class="fa fa-key"></i></span>
				    			<input class="input-large" id="novaSenhaID" type="password" name="novaSenha" maxlength="16" autocomplete="off">
					    	</div>
					    </div>
						<div id="divConfNovaSenhaID" class="form-group">
					    	<label class="col-sm-4 control-label" for="confSenhaID">Confirmação</label>
			    			<div class="input-group col-sm-2">
				    			<span class="input-group-addon"><i class="fa fa-key"></i></span>
				    			<input class="input-large" id="confNovaSenhaID" type="password" name="confNovaSenha" maxlength="16" autocomplete="off">
					    	</div>
					    </div>
						<br>
						<label class="col-sm-5 control-label" >&nbsp;</label>
			   			<div class="input-group">
							<button class="btn btn-primary" id="btnSubmitID" ><i class="fa fa-check bigger-110"></i> Salvar</button>
						</div>
				    </div>
				    <div class="col-sm-4">
				    	<div class="well">
							<h4 class="green smaller lighter"><i class="fa fa-graduation-cap fa-2x"></i> SuaFormatura.com</h4>
							Com o nosso portal ficará mais fácil realizar a formatura perfeita.
						</div>
				    </div>
				</div>
			</div>
			</form>
		</div>
	</div>
</div>
<script>
function zgWindowOpen(pUrl) {
	window.open(pUrl,'_self');
}

function zgLoadUrl(pUrl) {
	if (pUrl !== '#' && pUrl !== '') {
		$("#%DIVCENTRAL%ID").empty();
		$("#zgSpinnerID").removeClass("hidden");
		$("#%DIVCENTRAL%ID").load(pUrl,{}, function() {
			$("#zgSpinnerID").addClass("hidden");
		});
	}
}
function zgLoadMenu(pUrl,pId) {
	var $indTrocarSenha	= "%IND_TROCAR_SENHA%";
	if ($indTrocarSenha == 1) {
		$("#%DIVCENTRAL%ID").empty();
		$("#zgSpinnerID").removeClass("hidden");
		$("#%DIVCENTRAL%ID").load("%TROCA_SENHA_URL%?url="+pUrl,{}, function() {
			$("#zgSpinnerID").addClass("hidden");
		});
	}else{
		if (pUrl !== '#' && pUrl !== '') {
			$("#%DIVCENTRAL%ID").empty();
			$("#breadcrumbs").load("%BIN_URL%/breadcrumb.php?id="+pId);
			$("#zgSpinnerID").removeClass("hidden");
			$("#%DIVCENTRAL%ID").load("%BIN_URL%/loadMenu.php?id="+pId+"&url="+pUrl,{}, function() {
				$("#zgSpinnerID").addClass("hidden");
			});
		}
	}
}

function zgDownloadUrl(pUrl) {
	if (pUrl !== '#' && pUrl !== '') {
		$("#zgWindowDownID").attr("src", pUrl);
	}
}

function zgMostraAviso(pDescBT1,pDescBT2,pUrlBT2,pDescBT3,pUrlBT3,pDescBT4,pUrlBT4) {
	/** Definir valor padrão para os parâmetros **/
	
	if(typeof(pDescBT1)==='undefined')	pDescBT1	= '';
	if(typeof(pDescBT2)==='undefined')	pDescBT2	= '';
	if(typeof(pUrlBT2)==='undefined')	pUrlBT2		= '';
	if(typeof(pDescBT3)==='undefined')	pDescBT3	= '';
	if(typeof(pUrlBT3)==='undefined')	pUrlBT3		= '';
	if(typeof(pDescBT4)==='undefined')	pDescBT4	= '';
	if(typeof(pUrlBT4)==='undefined')	pUrlBT4		= '';
	
	var vUrl = '%ROOT_URL%/App/aviso.php?pDescBT1='+encodeURIComponent(pDescBT1)+'&pDescBT2='+encodeURIComponent(pDescBT2)+'&pDescBT3='+encodeURIComponent(pDescBT3)+'&pDescBT4='+encodeURIComponent(pDescBT4)+'&pUrlBT2='+pUrlBT2+'&pUrlBT3='+pUrlBT3+'&pUrlBT4='+pUrlBT4;
	
	$("#zgDivModalContentID").empty();
	$("#zgDivModalContentID").load(vUrl);
	$("#zgDivModalID").modal({
		keyboard: true,
		replace: true
	});
}

function zgLimpaModalAviso() {
	$("#zgDivModalContentID").empty();
	$("#zgDivModalContentID").html('');
}

function zgCriaSpanErro(pMsg) {
	return '<span class="popover-error" title="Mensagem de erro" data-rel="zg-popover" data-placement="top" data-trigger="hover" data-content="'+pMsg+'"><i class="fa fa-exclamation-circle red bigger-150"></i></span><script> $("[data-rel=zg-popover]").popover({html:true,template: \\'<div class="popover" style="width: 240px;" role="tooltip"><div class="arrow"></div><div class="popover-title"></div><div class="popover-content small smaller"></div></div>\\' }).on("show.bs.popover", function () { $(this).data("bs.popover").tip().css("max-width", "600px"); });<\\/script>';
}

function zgCriaSpanOK() {
	return '<span><i class="fa fa-check-circle green bigger-150"></i></span>';
}

</script>

<script type="text/javascript" charset="UTF-8" src="%PKG_URL%/ace/assets/js/jquery.gritter.js"></script>

<script type="text/javascript" charset="%CHARSET%">
//Verificar se a validação está OK
$('#btnSubmitID').on("click", function(e) {
	
	var vOK 	= validaPerfil();
	
	if(vOK == false) 	{
		$.gritter.add({
			title: 'Está faltando alguma coisa !!!',
			text: 'Corrija os campos marcados em vermelho',
			class_name: 'gritter-info gritter-error',
			time: '5000'
		});
		e.preventDefault();
		return false;
	}else{
		//$('#zgFormAlteraSenhaID').submit();
	}
});

// Submeter o formulário
$('#zgFormAlteraSenhaID').submit(function() {
	
	$('#btnSubmitID').html('Aguarde...  <i class="ace-icon fa fa-spinner fa-spin orange bigger-125"></i>');
	$('#btnSubmitID').attr("disabled","disabled");
	
	$.ajax({
		type:	"POST", 
		url:	"%DP%",
		data:	$('#zgFormAlteraSenhaID').serialize(),
	}).done(function( data, textStatus, jqXHR) {
		if (checaRetornoOK(data) == true) {
			//Mensagem de confirmação
			zgMostraMsg('divMsgID',zgGetMsgRetorno(data));
		}else{
			//Mensagem de erro
			zgMostraErro('divMsgID',zgGetMsgRetorno(data));
		}
		
		//Voltar o botão de salvar
		$('#btnSubmitID').html('<i class="fa fa-check bigger-110"></i> Salvar ');
		$('#btnSubmitID').attr("disabled",false);
		
		$('#zgDivModalID').on('hidden.bs.modal', function () {
			zgLimpaModalAviso();
			$('#zgDivModalID').off('hidden.bs.modal');
		});
	}).fail(function( jqXHR, textStatus, errorThrown) {
		zgMostraAviso(null);
	});
	return false; 
});

function validaPerfil(){
	var vNovaSenha		 = $('#novaSenhaID').val();
	var vConfSenha		 = $('#confNovaSenhaID').val();

	var vOK				 = true;
	var vIdent;
	
	//Senha nova
	if (!vNovaSenha) {
		$('#divNovaSenhaID').addClass('has-error');
		vOK	= false;
	}else{
		$('#divNovaSenhaID').removeClass('has-error');
	}
	
	//Senha confirm
	if (!vConfSenha) {
		$('#divConfNovaSenhaID').addClass('has-error');
		vOK	= false;
	}else{
		$('#divConfNovaSenhaID').removeClass('has-error');
	}
	
	if (vOK == true) {
		return true ;
	}else{
		return false;
	}
}
</script>

</body>
</html>
