<!DOCTYPE html>
<html lang="pt">
	<head>
		<title>Página de Login</title>
		<meta name="description" content="User login page" />
		<meta name="viewport" content="width=device-width, initial-scale=1.0" />
		<!-- Carregado dinamicamente através do dinamicHtmlLoad -->
		<meta http-equiv="content-type" content="text/html; charset=UTF-8" />
		<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
		<link href="%PKG_URL%/ace/assets/css/bootstrap.css" media="screen" rel="stylesheet" type="text/css" />
		<link href="%PKG_URL%/ace/assets/css/font-awesome.css" media="screen" rel="stylesheet" type="text/css" />
		<link href="%PKG_URL%/ace/assets/css/ace-fonts.css" media="screen" rel="stylesheet" type="text/css" />
		<link href="%PKG_URL%/ace/assets/css/ace.css" class="ace-main-stylesheet" id="main-ace-style" media="screen" rel="stylesheet" type="text/css" />
		<link href="%PKG_URL%/ace/assets/css/ace-skins3.min.css" media="screen" rel="stylesheet" type="text/css" />
		<link href="%PKG_URL%/ace/assets/css/ace-rtl.min.css" media="screen" rel="stylesheet" type="text/css" />
		<!--[if lte IE 9]>
			<link rel="stylesheet" href="%PKG_URL%/ace/assets/css/ace-part2.css" class="ace-main-stylesheet" />
		<![endif]-->

		<!--[if lte IE 9]>
			<link rel="stylesheet" href="%PKG_URL%/ace/assets/css/ace-ie.css" />
		<![endif]-->
		<link href="%PKG_URL%/ace/assets/css/jquery-ui.custom.css" media="screen" rel="stylesheet" type="text/css" />
		<link href="%PKG_URL%/ace/assets/css/jquery-ui.css" media="screen" rel="stylesheet" type="text/css" />
		<link href="%PKG_URL%/ace/assets/css/jquery.gritter.css" media="screen" rel="stylesheet" type="text/css" />

		<script type="text/javascript" charset="UTF-8" src="%PKG_URL%/ace/assets/js/ace-extra.js"></script>
		<style type="text/css" media="all">@import "%CSS_URL%/zgWeb.css";</style>
		
		<!--[if lt IE 9]>
			<script type="text/javascript" charset="UTF-8" src="%PKG_URL%/ace/assets/js/html5shiv.js"></script>
			<script type='text/javascript' charset='UTF-8' src="%PKG_URL%/ace/assets/js/respond.js"></script>
		<![endif]-->

		<!--[if !IE]> -->
		<script type="text/javascript">
			window.jQuery || document.write("<script src='%PKG_URL%/ace/assets/js/jquery.js'>"+"<"+"/script>");
		</script>

		<!-- <![endif]-->

		<!--[if IE]>
		<script type="text/javascript">
 			window.jQuery || document.write("<script src='%PKG_URL%/ace/assets/js/jquery1x.js'>"+"<"+"/script>");
		</script>
		<![endif]-->
		<script type="text/javascript">
			if('ontouchstart' in document.documentElement) document.write("<script src='%PKG_URL%/ace/assets/js/jquery.mobile.custom.js'>"+"<"+"/script>");
		</script>

		<script type="text/javascript" charset="UTF-8" src="%PKG_URL%/ace/assets/js/bootstrap.js"></script>
		<script type="text/javascript" charset="UTF-8" src="%PKG_URL%/zage/js/jquery.base64.min.js"></script>
		<script type="text/javascript" charset="UTF-8" src="%JS_URL%/zgWeb.js"></script>
		
		<!--[if lte IE 8]>
			<script type="text/javascript" charset="UTF-8" src="%PKG_URL%/ace/assets/js/excanvas.js"></script>
		<![endif]-->
		
		<!-- Fim do carregamento dinâmico (dinamicHtmlLoad) -->
	</head>

<body class="login-layout light-login">
	<div class="main-container">
		<div class="main-content">
			<div class="row">
				<div class="col-sm-10 col-sm-offset-1">
					<div>
						<div class="left">
							<h1>
								<a class="brand" href="http://www.zage.com.br"><img src="%IMG_URL%/zageLogo.png" alt="Zage - Tecnologia"></a>
							</h1>
						</div>
					</div>
					<div class="login-container">
						<div class="space-6"></div>
						<div class="space-6"></div>
						<div class="space-6"></div>
						<div class="space-6"></div>
						<div class="space-6"></div>
						<div class="space-6"></div>
						<div class="space-6"></div>
						<div class="space-6"></div>
						<div class="position-relative">
							<div id="login-box" class="login-box visible widget-box no-border">
								<div class="widget-body">
									<div class="widget-main">
										<h4 class="header blue lighter bigger">
											<i class="icon-lock green"></i>
											Informe os seus dados
										</h4>
										<div class="space-6"></div>
										<form id="FormLoginID" class="form login-form" method="post" action="%URL_FORM%">
											<fieldset>
												<label class="block clearfix">
													<span class="block input-icon input-icon-right">
														<input type="text" id= "usuarioID" name="zgUsuario" value="%USUARIO%" class="form-control" placeholder="Usuário" />
														<i class="ace-icon fa fa-user"></i>
													</span>
												</label>

												<label class="block clearfix">
													<span class="block input-icon input-icon-right">
														<input type="password" id="senhaID" name="zgSenha" class="form-control" placeholder="Senha" />
														<i class="ace-icon fa fa-lock"></i>
													</span>
												</label>

												<div class="space"></div>
												<div class="%HIDDEN%">
													<div class="alert alert-info">
														<button type="button" class="close" data-dismiss="alert"><i class="ace-icon fa fa-times"></i></button>
	             											%MENSAGEM%
	           										</div>
           										</div>
												<div class="space"></div>

												<div class="clearfix">
													<button type="button" class="width-35 pull-right btn btn-sm btn-primary" onclick='$("#FormLoginID").submit();'>
														<i class="ace-icon fa fa-key"></i>
														Login
													</button>
												</div>

											<div class="space-4"></div>
										</fieldset>
									</form>

								</div><!-- /widget-main -->

								<div class="toolbar clearfix">
									<div>
										<a href="#" onclick="show_box('forgot-box'); return false;" class="forgot-password-link">
											<i class="ace-icon fa fa-arrow-left"></i>
											Esqueci a senha
										</a>
									</div>
									<div>
										<a class="brand" href="http://www.zage.com.br"><img src="%IMG_URL%/zage_23x23.png" alt="Zage - Tecnologia"></a>
					      			</div>
								</div>
							</div><!-- /widget-body -->
						</div><!-- /login-box -->

						<div id="forgot-box" class="forgot-box widget-box no-border">
							<div class="widget-body">
								<div class="widget-main">
									<h4 class="header red lighter bigger">
										<i class="ace-icon fa fa-key"></i>
										Resgatar a Senha
									</h4>

									<div class="space-6"></div>
									<p>
										Digite o e-mail para receber as instruções
									</p>

									<form id="zgFormAlteraSenhaID" class="form-horizontal">
										<fieldset>
											<label class="block clearfix">
												<span class="block input-icon input-icon-right">
													<input type="email" id="emailID" name="email" class="form-control" placeholder="Email" />
													<i class="ace-icon fa fa-envelope"></i>
												</span>
											</label>

											<div class="clearfix">
												<button type="submit" id="btnSubmitID" class="width-35 pull-right btn btn-sm btn-danger">
													<i class="ace-icon fa fa-lightbulb"></i>
													Enviar
												</button>
											</div>
										</fieldset>
									</form>
								</div><!-- /widget-main -->
								<div id="divMsgID">
	    						</div>
								<div class="toolbar center">
									<a href="#" onclick="show_box('login-box'); return false;" class="back-to-login-link">
										Voltar para o login
										<i class="ace-icon fa fa-arrow-right"></i>
									</a>
								</div>
							</div><!-- /widget-body -->
						</div><!-- /forgot-box -->
					</div><!-- /position-relative -->
				</div>
			</div><!-- /.col -->
		</div><!-- /.row -->
	</div>
</div><!-- /.main-container -->

<script>
function zgMostraAviso(pDescBT1,pDescBT2,pUrlBT2,pDescBT3,pUrlBT3,pDescBT4,pUrlBT4) {
	/** Definir valor padrão para os parâmetros **/
	
	if(typeof(pDescBT1)==='undefined')	pDescBT1	= '';
	if(typeof(pDescBT2)==='undefined')	pDescBT2	= '';
	if(typeof(pUrlBT2)==='undefined')	pUrlBT2		= '';
	if(typeof(pDescBT3)==='undefined')	pDescBT3	= '';
	if(typeof(pUrlBT3)==='undefined')	pUrlBT3		= '';
	if(typeof(pDescBT4)==='undefined')	pDescBT4	= '';
	if(typeof(pUrlBT4)==='undefined')	pUrlBT4		= '';
	
	var vUrl = '%ROOT_URL%/App/aviso.php?pDescBT1='+encodeURIComponent(pDescBT1)+'&pDescBT2='+encodeURIComponent(pDescBT2)+'&pDescBT3='+encodeURIComponent(pDescBT3)+'&pDescBT4='+encodeURIComponent(pDescBT4)+'&pUrlBT2='+pUrlBT2+'&pUrlBT3='+pUrlBT3+'&pUrlBT4='+pUrlBT4;
	
	$("#zgDivModalContentID").empty();
	$("#zgDivModalContentID").load(vUrl);
	$("#zgDivModalID").modal({
		keyboard: true,
		replace: true
	});
}

function zgLimpaModalAviso() {
	$("#zgDivModalContentID").empty();
	$("#zgDivModalContentID").html('');
}

function zgCriaSpanErro(pMsg) {
	return '<span class="popover-error" title="Mensagem de erro" data-rel="zg-popover" data-placement="top" data-trigger="hover" data-content="'+pMsg+'"><i class="fa fa-exclamation-circle red bigger-150"></i></span><script> $("[data-rel=zg-popover]").popover({html:true,template: \\'<div class="popover" style="width: 240px;" role="tooltip"><div class="arrow"></div><div class="popover-title"></div><div class="popover-content small smaller"></div></div>\\' }).on("show.bs.popover", function () { $(this).data("bs.popover").tip().css("max-width", "600px"); });<\\/script>';
}

function zgCriaSpanOK() {
	return '<span><i class="fa fa-check-circle green bigger-150"></i></span>';
}

</script>

	<script type="text/javascript">
		// Submeter o formulário
		$('#zgFormAlteraSenhaID').submit(function() {
			
			$('#btnSubmitID').html('Aguarde...  <i class="ace-icon fa fa-spinner fa-spin orange bigger-125"></i>');
			$('#btnSubmitID').attr("disabled","disabled");
			
			$.ajax({
				type:	"POST", 
				url:	"%DP%",
				data:	$('#zgFormAlteraSenhaID').serialize(),
			}).done(function( data, textStatus, jqXHR) {
				if (checaRetornoOK(data) == true) {
					//Mensagem de confirmação
					zgMostraMsg('divMsgID',zgGetMsgRetorno(data));
				}else{
					//Mensagem de erro
					zgMostraErro('divMsgID',zgGetMsgRetorno(data));
				}
				
				//Voltar o botão de salvar
				$('#btnSubmitID').html('<i class="fa fa-check bigger-110"></i> Enviar ');
				$('#btnSubmitID').attr("disabled",false);
				
				$('#zgDivModalID').on('hidden.bs.modal', function () {
					zgLimpaModalAviso();
					$('#zgDivModalID').off('hidden.bs.modal');
				});
			}).fail(function( jqXHR, textStatus, errorThrown) {
				zgMostraAviso(null);
			});
			return false; 
		});
		
		function show_box(id) {
		 jQuery('.widget-box.visible').removeClass('visible');
		 jQuery('#'+id).addClass('visible');
		}
	</script>
	
</body>
</html>
