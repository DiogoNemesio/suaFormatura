<form id="zgFormModalID" class="form-horizontal">
<div class="modal-header">
	<button type="button" class="close" data-dismiss="modal" aria-hidden="true">×</button>
	<h4 class=""><i class="fa fa-tag grey"></i>&nbsp;%TITULO%</h4>
</div>
<div class="modal-body" style="overflow-y: scroll; height: 200px;">
	<input type="hidden" name="codChip" value="%COD_CHIP%">
	<input type="hidden" name="id" value="%ID%">
	<div class="row">
		<div class="col-sm-12">
			<div class="form-group">
		    	<label class="col-sm-12 control-label center">%MENSAGEM%</label>
    		</div>
    	</div>
    </div>
    <div id="divMsgChipSmsID">
    </div>
</div>
<div class="modal-footer">
	<button type="submit" %PODE_SMS% class="btn btn-primary" id="btnSmsRequestID">Desejo enviar o código SMS</button>
	<button type="button" data-dismiss="modal" class="btn">Fechar</button>
</div>
</form>


<script type="text/javascript" charset="%CHARSET%">
$('#zgFormModalID').submit(function() {
	$.ajax({
		type:	"POST", 
		url:	"%DP_MODAL%",
		data:	$('#zgFormModalID').serialize(),
	}).done(function( data, textStatus, jqXHR) {
		if (checaRetornoOK(data) == true) {
			zgMostraMsg('divMsgChipSmsID',zgGetMsgRetorno(data));
			$('#btnSmsRequestID').prop('disabled', true);
			
			$('#zgDivModalID').on('hidden.bs.modal', function () {
				zgAbreModal('%URL_REG%');
				$('#zgDivModalID').off('hidden.bs.modal');
			});
		}else{
			zgMostraErro('divMsgChipSmsID',zgGetMsgRetorno(data));

			$('#zgDivModalID').on('hidden.bs.modal', function () {
				zgLoadUrl('%URL_VOLTAR%');
				$('#zgDivModalID').off('hidden.bs.modal');
			});
		}
		
	}).fail(function( jqXHR, textStatus, errorThrown) {
		zgMostraErro('zgDivModalID',errorThrown);
	});
	return false; 
});

$('[data-rel=tooltip]').tooltip();
$('[data-rel=popover]').popover({html:true});
$('[data-rel="select2"]').select2();
$('.datepicker').datepicker({"autoclose": true});

$('[zg-data-toggle="mask"]').each(function( index ) {
	zgMask($( this ), $( this ).attr('zg-data-mask'));
});


</script>
