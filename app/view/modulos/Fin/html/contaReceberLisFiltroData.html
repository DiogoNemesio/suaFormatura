<form id="zgFormTempCRLisFiltroID">
<div class="btn-group btn-corner center">
	<button type="button" class="btn btn-white btn-sm" title="Voltar" id="btnCRListFiltroVoltarID" onclick="voltarDataCRLisFiltro();">
		<i class="fa fa-angle-double-left "></i>
	</button>
	<span id="CRLisFiltroPopoverID" style="width: 250px;" class="btn btn-white btn-sm" data-rel="popover" data-placement="bottom" >%TEXTO_FILTRO%</span>
	<button type="button" class="btn btn-white btn-sm tooltip-info" onclick="toogleFiltroCRLis();" data-rel='tooltip' data-placement='top' title="Filtrar">
		<i class="fa fa-filter"></i>
	</button>
	<div class="inline dropdown dropup btn btn-white btn-sm" id="CRLisFiltroDivAcaoLoteID">
		<a href="#" data-toggle="dropdown" class="disabled" id="CRLisFiltroBtnAcaoLoteID">
			<span class="fa">
  				<i class="fa fa-cogs bigger-120 grey" id='CRLisFiltroIco1AcaoLoteID'></i>
  				<i class="fa fa-ban fa-stack-1x bigger-150 red" id='CRLisFiltroIco2AcaoLoteID'></i>
			</span>
		</a>
		<ul class="dropdown-menu dropdown-menu-right dropdown-125 dropdown-lighter dropdown-close dropdown-caret">
			<li class="active"><a href="#"><div class="center small bolder blue">Ações em Lote</div></a></li>
			<li><a href="#">
				<div class="inline" id='zgDivAcoesExcID' style="width: 30px;"></div>
				<div class="inline" id='zgDivAcoesCanID' style="width: 30px;"></div>
				<div class="inline" id='zgDivAcoesConID' style="width: 30px;"></div>
				<div class="inline" id='zgDivAcoesImpID' style="width: 30px;"></div>
			</a></li>
		</ul>
	</div>
	
	<button type="button" class="btn btn-white btn-sm" title="Avançar" id="btnCRListFiltroAvancarID" onclick="avancarDataCRLisFiltro();">
		<i class="fa fa-angle-double-right"></i>
	</button>
</div>

<div id="divPopoverCRLisFiltroContentID" class="hide">
	<div class="col-sm-12 hide" id="divCRLisFiltroContentDiarioID">
		<label class="col-sm-3 control-label">Dia:</label>
		<div class="col-xs-12 col-sm-9">
    		<input class='form-control' id='tempDataFiltroID' type='text' maxlength='10' onchange="copiaValoresFormCRLisFiltro();" value='%DATA_FILTRO%' autocomplete='off' zg-data-toggle='mask' zg-data-mask='data'>
		</div>
	</div>
	<div class="col-sm-12 hide" id="divCRLisFiltroContentMensalID">
		<label class="col-sm-3 control-label">Mês:</label>
		<div class="col-xs-12 col-sm-9">
    		<input class='form-control datepicker col-md-12' id='tempMesFiltroID' onchange="copiaValoresFormCRLisFiltro();" value='%MES_FILTRO%' type='text' maxlength='7' autocomplete='off'>
		</div>
	</div>
	<div class="form-group col-sm-12 hide" id="divCRLisFiltroContentPeriodoID">
		<label class="col-sm-3 control-label">Período:</label>
		<div class="col-xs-12 col-sm-9 input-daterange input-group">
			<input type="text" class="input-sm form-control" id="tempDataIniFiltroID" onchange="copiaValoresFormCRLisFiltro();" maxlength='10' value='%DATA_INI_FILTRO%' autocomplete='off' zg-data-toggle='mask' zg-data-mask='data'/>
			<span class="input-group-addon"><i class="fa fa-exchange"></i></span>
			<input type="text" class="input-sm form-control"  id="tempDataFimFiltroID" onchange="copiaValoresFormCRLisFiltro();" maxlength='10' value='%DATA_FIM_FILTRO%' autocomplete='off' zg-data-toggle='mask' zg-data-mask='data'/>
		</div>
	</div>
	<div class="form-group col-sm-12 center">
	&nbsp;
	</div>
	
	<div class="form-group col-sm-12 center">
		<label class="col-sm-3 control-label">Filtrar Por:</label>
		<div class="btn-group btn-corner col-sm-9 center">
			<span id="CRLisFiltroDataTipoEmiID" style="width: 100px;" class="btn btn-sm" onclick="selecionaEmissaoCRLisFiltro();">Emissão</span>
			<span id="CRLisFiltroDataTipoVenID" style="width: 100px;" class="btn btn-sm" onclick="selecionaVencimentoCRLisFiltro();">Vencimento</span>
		</div>
	</div>

	<div class="form-group col-sm-12 center">
	&nbsp;
	</div>
	<label class="col-sm-3 control-label">&nbsp;</label>
	<div class="btn-group btn-corner col-sm-9 center">
		<button type='button' class='btn btn-success btn-sm' onclick="CRLisFilter();">Filtrar</button>
		<button type='button' class='btn btn-danger btn-sm' onclick='fecharPopoverCRLisFiltro();'>Fechar</button>
	</div>
</div>
<div id="divPopoverCRLisFiltroDataTitleID" class="hide">
	<div class='btn-group btn-corner' style="width: 370px;">
		<button type='button' class='btn btn-white btn-sm' style='width:120px;' onclick='mostraDiarioCRLisFiltro();'>Diário</button>
		<button type='button' class='btn btn-white btn-sm' style='width:120px;' onclick='mostraMensalCRLisFiltro();'>Mensal</button>
		<button type='button' class='btn btn-white btn-sm' style='width:120px;' onclick='mostraPeriodoCRLisFiltro();'>Período</button>
	</div>
</div>
</form>
<script>

$('[data-rel=tooltip]').tooltip();

function CRLisFilter() {
	copiaValoresFormCRLisFiltro();
	$('#zgFormFiltroID').submit();
}

function copiaValoresFormCRLisFiltro() {
	var $data,$mes,$dataIni,$dataFim;
	
	$data		= $('#tempDataFiltroID').val();
	$mes		= $('#tempMesFiltroID').val();
	$dataIni	= $('#tempDataIniFiltroID').val();
	$dataFim	= $('#tempDataFimFiltroID').val();
	
	if (!$data)		$data		= "all";
	if (!$mes)		$mes		= "all";
	if (!$dataIni)	$dataIni	= "all";
	if (!$dataFim)	$dataFim	= "all";
	
	
	/** Copiar valores para o outro form **/
	$('#dataFiltroID').val( $data );
	$('#mesFiltroID').val( $mes );
	$('#dataIniFiltroID').val( $dataIni );
	$('#dataFimFiltroID').val( $dataFim );

}


function selecionaEmissaoCRLisFiltro() {
	$('#CRLisFiltroDataTipoEmiID').addClass("btn-primary");
	$('#CRLisFiltroDataTipoEmiID').removeClass("btn-light");
	$('#CRLisFiltroDataTipoVenID').addClass("btn-light");
	$('#CRLisFiltroDataTipoVenID').removeClass("btn-primary");
	$('#dataTipoID').val("E");
}

function selecionaVencimentoCRLisFiltro() {
	$('#CRLisFiltroDataTipoVenID').addClass("btn-primary");
	$('#CRLisFiltroDataTipoVenID').removeClass("btn-light");
	$('#CRLisFiltroDataTipoEmiID').addClass("btn-light");
	$('#CRLisFiltroDataTipoEmiID').removeClass("btn-primary");
	$('#dataTipoID').val("V");
}


function avancarDataCRLisFiltro() {
	$('#dataAvancarID').val(1);
	$('#dataVoltarID').val(0);
	CRLisFilter();
}

function voltarDataCRLisFiltro() {
	$('#dataAvancarID').val(0);
	$('#dataVoltarID').val(1);
	CRLisFilter();
}

function fecharPopoverCRLisFiltro() {
	$("#CRLisFiltroPopoverID").popover("hide");
}
function mostraDiarioCRLisFiltro() {
	$('#btnCRListFiltroVoltarID').removeAttr('disabled');
	$('#btnCRListFiltroAvancarID').removeAttr('disabled');
	$('#codTipoFiltroID').val("D");
	$('#divCRLisFiltroContentMensalID').addClass("hide");
	$('#divCRLisFiltroContentPeriodoID').addClass("hide");
	$('#divCRLisFiltroContentDiarioID').removeClass("hide");
}

function mostraMensalCRLisFiltro() {
	$('#btnCRListFiltroVoltarID').removeAttr('disabled');
	$('#btnCRListFiltroAvancarID').removeAttr('disabled');
	$('#codTipoFiltroID').val("M");
	$('#divCRLisFiltroContentDiarioID').addClass("hide");
	$('#divCRLisFiltroContentPeriodoID').addClass("hide");
	$('#divCRLisFiltroContentMensalID').removeClass("hide");
}


function mostraPeriodoCRLisFiltro() {
	$('#btnCRListFiltroVoltarID').attr('disabled','disabled');
	$('#btnCRListFiltroAvancarID').attr('disabled','disabled');
	$('#codTipoFiltroID').val("P");
	$('#divCRLisFiltroContentDiarioID').addClass("hide");
	$('#divCRLisFiltroContentMensalID').addClass("hide");
	$('#divCRLisFiltroContentPeriodoID').removeClass("hide");
}



$( document ).ready(function() {
	
	
	var tmp = $.fn.popover.Constructor.prototype.show;
	$.fn.popover.Constructor.prototype.show = function () {
	tmp.call(this);
		if (this.options.callback) {
			this.options.callback();
		}
	}
	
	$('[data-rel=popover]').popover({ 
		html:true,
		content: function() {
			return $('#divPopoverCRLisFiltroContentID').html();
		},
		title: function() {
			return $('#divPopoverCRLisFiltroDataTitleID').html();
		},
		callback: function() {
			$('#tempDataFiltroID').datepicker({autoclose: true,todayHighlight: true,todayBtn: true});
			$('#tempMesFiltroID').datepicker({autoclose: true,format: "mm/yyyy",viewMode: "months", minViewMode: "months"});
			$('.input-daterange').datepicker({autoclose: true,todayHighlight: true,todayBtn: true});
		} 
	}).on("show.bs.popover", function () {
		var $tip	= $(this).data("bs.popover").tip();
		$tip.css("max-width", "600px");
	});
	
	var $tipoFiltro	= $('#codTipoFiltroID').val(); 
	var $tipoData	= $('#dataTipoID').val();
	
	if ( $tipoFiltro == 'P') {
		mostraPeriodoCRLisFiltro();
	}else if ($tipoFiltro == 'M') {
		mostraMensalCRLisFiltro();
	}else{
		mostraDiarioCRLisFiltro();
	}

	if ( $tipoData == 'E') {
		selecionaEmissaoCRLisFiltro();
	}else{
		selecionaVencimentoCRLisFiltro();
	}
	
});


</script>