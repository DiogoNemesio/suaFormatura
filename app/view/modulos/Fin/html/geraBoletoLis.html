<form id="zgFormFiltroID" class="form-horizontal">
	<input type="hidden" name="codTipoFiltro"	id="codTipoFiltroID" 	value="%COD_TIPO_FILTRO%">
	<input type="hidden" name="dataTipo"		id="dataTipoID"			value="%DATA_TIPO%">
	<input type="hidden" name="dataFiltro"		id="dataFiltroID"		value="%DATA_FILTRO%">
	<input type="hidden" name="mesFiltro"		id="mesFiltroID"		value="%MES_FILTRO%">
	<input type="hidden" name="dataIniFiltro"	id="dataIniFiltroID"	value="%DATA_INI_FILTRO%">
	<input type="hidden" name="dataFimFiltro"	id="dataFimFiltroID"	value="%DATA_FIM_FILTRO%">
	<input type="hidden" name="dataAvancar"		id="dataAvancarID"	>
	<input type="hidden" name="dataVoltar"		id="dataVoltarID"	>
</form>
<div class="row">
	<div class="col-sm-12 widget-container-span">
		<div class="widget-body">
			<div class="box-content">
				%GRID%
			</div><!--/span-->
		</div>
	</div>
</div>

<script>

var $aCodigos	= '%JSON_CODIGOS%';
var oTable		= $('#GBolLisID').dataTable();

$('#zgFormFiltroID').submit(function() {
	/** Retirar a máscara para os campos que estão configurados para tal **/
	$('[zg-data-mask-retira="1"]').each(function( index ) {
		$( this ).val($( this ).cleanVal());
	});

	$("#zgSpinnerID").removeClass("hidden");
	
	$.ajax({
		type:	"POST", 
		url:	"%FILTER_URL%",
		data:	$('#zgFormFiltroID').serialize(),
	}).done(function( data, textStatus, jqXHR) {
		$("#%DIVCENTRAL%ID").html( data );
		$("#zgSpinnerID").addClass("hidden");
	});


	/** Recolocar a máscara para os campos que estão configurados para tal **/
	$('[zg-data-mask-retira="1"]').each(function( index ) {
		zgMask($( this ), $( this ).attr('zg-data-mask'));
		$( this ).trigger('keyup');
	});
		
	return false; 
});


$( document ).ready(function() {
	$('#zgGridCustomHeaderID').load('%FILTER_DATE_URL%');
	
	var $tipoData		= $('#dataTipoID').val();
	var $dataFiltro		= $('#dataFiltroID').val();
	var $mesFiltro		= $('#mesFiltroID').val();
	var $dataIniFiltro	= $('#dataIniFiltroID').val();
	var $dataFimFiltro	= $('#dataFimFiltroID').val();
		
	$("thead th").each( function ( i ) {
		if ($tipoData == "E" && $(this).text() == "EMISSÃO") {
			$(this).addClass("info");
		}else if ($tipoData == "V" && $(this).text() == "VENCIMENTO") {
			$(this).addClass("info");
		}
		
    });
	
	oTable.on( 'change', 'input[name="%CHECK_NAME%[]"]', function () {
		var $count 		= oTable.$('input[name="%CHECK_NAME%[]"]:checked').length;

		if ($count > 50) {
			zgDesabilitaAcoesBOLLis();
			$.gritter.add({
				title: 'Aviso',
				text: 'Máximo de "50" contas podem ser selecionadas !!!',
				class_name: 'gritter-info gritter-error',
				time: '5000',
			});
		}else if ($count == 0) {
			zgDesabilitaAcoesBOLLis();
		}else{
			zgHabilitaAcoesBOLLis();
		}
	} );
	
	oTable.on( 'change', 'input[name="%CHECK_NAME%_all"]', function () {
		var $count 		= oTable.$('input[name="%CHECK_NAME%[]"]:checked').length;
		var $api 		= oTable.api();
		var $info 		= $api.page.info();
		
		if ($count > 50) {
			zgDesabilitaAcoesBOLLis();
			$.gritter.add({
				title: 'Aviso',
				text: 'Máximo de "50" contas podem ser selecionadas !!!',
				class_name: 'gritter-info gritter-error',
				time: '5000',
			});
		}else if ($count == 0) {
			zgDesabilitaAcoesBOLLis();
		}else{
			zgHabilitaAcoesBOLLis();
			
			if ($info.pages > 1) {
				$.gritter.add({
					title: 'Aviso',
					text: 'As contas de todas as páginas, foram selecionadas !!!!',
					class_name: 'gritter-info',
					time: '5000',
				});
			}
			
		}
	} );
});

zgDesabilitaAcoesBOLLis();

function zgHabilitaAcoesBOLLis() {

	$('#BOLLisFiltroIco1AcaoLoteID').attr("onclick","zgAcaoBolSelecionadosBOLLis();");
	
	$('#BOLLisFiltroBtnAcaoLoteID').attr("disabled",false);
	$('#BOLLisFiltroBtnAcaoLoteID').removeClass("disabled");
	$("#BOLLisFiltroIco1AcaoLoteID").removeClass("grey");
	$("#BOLLisFiltroIco1AcaoLoteID").addClass("blue");
	$("#BOLLisFiltroIco2AcaoLoteID").addClass("hidden");
}

function zgDesabilitaAcoesBOLLis() {
	
	$('#BOLLisFiltroIco1AcaoLoteID').attr("onclick","return false;");
	
	$('#BOLLisFiltroBtnAcaoLoteID').attr("disabled","disabled");
	$('#BOLLisFiltroBtnAcaoLoteID').addClass("disabled");
	$("#BOLLisFiltroIco1AcaoLoteID").removeClass("blue");
	$("#BOLLisFiltroIco1AcaoLoteID").addClass("grey");
	$("#BOLLisFiltroIco2AcaoLoteID").removeClass("hidden");
}

function toogleFiltroBOLLis() {
	zgAbreModal("%URL_FILTRO%");
	//$("#BOLLisFilterDivID").toggleClass("hidden");
}

function zgAcaoBolSelecionadosBOLLis() {
	var $aSelContas	= [];
	oTable.$('input[name="%CHECK_NAME%[]"]:checked').each( function() {
		$aSelContas[$aSelContas.length]	= $(this).val();
	});
	zgAbreModal('%BOL_URL%&cid='+zgEncodeUrl('aSelContas='+$aSelContas));
}

$(".nav-tabs a[data-toggle=tab]").on("click", function(e) {
	if ($(this).hasClass("disabled")) {
		e.preventDefault();
		return false;
	}
});

$('[data-rel=tooltip]').tooltip({html:true});
$('[data-rel=popover]').popover({html:true});
$('.datepicker').datepicker({"autoclose": true});

$('[zg-data-toggle="mask"]').each(function( index ) {
	zgMask($( this ), $( this ).attr('zg-data-mask'));
});

$(document).one('ajaxloadstart.page', function(e) {
	$('[class*=select2]').remove();
	$('.rating').raty('destroy');
	$('.multiselect').multiselect('destroy');
});

</script>