<div id="content">
	<div class="page-header">
		<h1><i class="fa fa-barcode black">&nbsp;</i>MEUS PAGAMENTOS&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			<a href="javascript:zgLoadUrl('%URL_HIST%');" class="btn btn-primary"><i class="ace-icon fa fa-history bigger-130"></i>Ver Histórico</a>
		</h1>
	</div><!-- /.page-header -->
	
	<form id="zgFormMeuPagID" class="form-horizontal" method="post" action="%DP%" target="_blank">
	<input type="hidden" name="id" 				value="%ID%">
	<input type="hidden" name="codContaSel[]" 	id="codContaSelID">
	<input type="hidden" name="vencimento" 		id="vencimentoID">
	<input type="hidden" name="valor" 			id="valorID">
	<input type="hidden" name="valorJuros" 		id="valorJurosID">
	<input type="hidden" name="valorMora" 		id="valorMoraID">
	<input type="hidden" name="valorDesconto" 	id="valorDescontoID">
	<input type="hidden" name="valorOutros" 	id="valorOutrosID">
	<input type="hidden" name="tipoMidia" 		id="tipoMidiaID">
	<input type="hidden" name="instrucao" 		id="instrucaoID">
	<input type="hidden" name="email" 			id="emailID">
	
	<div class="col-xs-12 %HID_ATR%" id="divGridAtr">
		<div id="divMsgMeuPagID"></div>
		<div class="vspace-xs"></div>
		<h4 class="header blue bolder smaller">Pagamentos atrasados&nbsp;<i class="fa fa-exclamation-circle red"></i></h4>
		<div class="vspace-xs"></div>
		<div class="row">
			<div class="box-content col-xs-10">
				<table id="CPAltTableRateioID" class="table table-condensed table-hover table-striped table-bordered bootstrap-datatable datatable display">
					<thead>
						<tr class="warning">
							<th class="col-sm-4 center">Descrição</th>
							<th class="col-sm-1 center">Parcela</th>
							<th class="col-sm-2 center">Vencimento</th>
							<th class="col-sm-2 center">Valor</th>
							<th class="col-sm-1 center">Júros</th>
							<th class="col-sm-1 center">Boleto</th>
						</tr>
					</thead>
					<tbody>
					%TAB_ATR%
					</tbody>
					<tfoot>
						<tr>
							<th colspan="3" style="text-align: right;">Total em atraso (com júros)</th>
							<th colspan="2" style="text-align: right;">%TOT_ATR%</th>
						</tr>
					</tfoot>
				</table>
			</div><!--/span-->
		</div>
	</div>
	
	<div class="col-xs-12 %HID_FUT%" id="divGridFut">
		<h4 class="header blue bolder smaller">Próximas %NUM_FUT% mensalidades</h4>
		<div class="vspace-xs"></div>
		<div class="row">
			<div class="box-content col-xs-10">
				<table id="CPAltTableRateioID" class="table table-condensed table-hover table-striped table-bordered bootstrap-datatable datatable display">
					<thead>
						<tr class="warning">
							<th class="col-sm-4 center">Descrição</th>
							<th class="col-sm-1 center">Parcela</th>
							<th class="col-sm-2 center">Vencimento</th>
							<th class="col-sm-2 center">Valor</th>
							<th class="col-sm-1 center">Júros</th>
							<th class="col-sm-1 center">Boleto</th>
						</tr>
					</thead>
					<tbody>
					%TAB_FUT%
					</tbody>
				</table>
			</div><!--/span-->
		</div>
	</div>
	</form>
</div>

<script type="text/javascript" charset="%CHARSET%">
/********************* Popover *********************/
$('[data-rel=popover]').popover({html:true});
$('[data-toggle="popover"]').popover();

$('[zg-data-toggle="mask"]').each(function( index ) {
	zgMask($( this ), $( this ).attr('zg-data-mask'));
});

$('.datepicker').datepicker({
	language: "pt-BR"
});

$(".select2").select2("destroy").select2({});
/*$(document).ready(function() {
	$("#codFormaPagID").select2("destroy").select2({});
	$("#codContaCreID").select2("destroy").select2({});
});*/


function meuPagBoleto(pCodConta,pVenc,pValor,pJuros,pMora,pDesconto,pOutros,pTipoMidia,pInstrucao,pEmail) {
	$('#codContaSelID').eq(0).val(pCodConta);
	$('#vencimentoID').val(pVenc);
	$('#valorID').val(pValor);
	$('#valorJurosID').val(pJuros);
	$('#valorMoraID').val(pMora);
	$('#valorDescontoID').val(pDesconto);
	$('#valorOutrosID').val(pOutros);
	$('#tipoMidiaID').val(pTipoMidia);
	$('#instrucaoID').val(pInstrucao);
	$('#emailID').val(pEmail);

	if (pTipoMidia == "MAIL") {
		zgMostraAviso('divMsgMeuPagID',"<i class='fa fa-cog fa-spin'></i>&nbsp;Aguarde e-mail sendo enviado !!!");
		$('#zgFormMeuPagID').submit(function(e) {
			$.ajax({
				type:	"POST", 
				url:	"%DP%",
				data:	$('#zgFormMeuPagID').serialize(),
			}).done(function( data, textStatus, jqXHR) {
				zgMostraMsg('divMsgMeuPagID',"Email enviado com sucesso !!!");
			}).fail(function( jqXHR, textStatus, errorThrown) {
				zgMostraAviso(null);
			});
			return false; 
		});
	}else{
		$( "#zgFormMeuPagID").unbind( "submit" );
	}
	
	$('#zgFormMeuPagID').submit();
	e.preventDefault();
	return false; 
}
</script>

