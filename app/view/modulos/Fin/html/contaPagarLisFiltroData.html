<form id="zgFormTempCPLisFiltroID">
<div class="btn-group btn-corner center">
	<button type="button" class="btn btn-white btn-sm" title="Voltar" id="btnCPListFiltroVoltarID" onclick="voltarDataCPLisFiltro();">
		<i class="fa fa-angle-double-left "></i>
	</button>
	<span id="CPLisFiltroPopoverID" style="width: 250px;" class="btn btn-white btn-sm" data-rel="popover" data-placement="bottom" >%TEXTO_FILTRO%</span>
	<button type="button" class="btn btn-white btn-sm tooltip-info" onclick="toogleFiltroCPLis();" data-rel='tooltip' data-placement='top' title="Filtrar">
		<i class="fa fa-filter"></i>
	</button>
	<div class="inline dropdown dropup btn btn-white btn-sm" id="CPLisFiltroDivAcaoLoteID">
		<a href="#" data-toggle="dropdown" class="disabled" id="CPLisFiltroBtnAcaoLoteID">
			<span class="fa">
  				<i class="fa fa-cogs bigger-120 grey" id='CPLisFiltroIco1AcaoLoteID'></i>
  				<i class="fa fa-ban fa-stack-1x bigger-150 red" id='CPLisFiltroIco2AcaoLoteID'></i>
			</span>
		</a>
		<ul class="dropdown-menu dropdown-menu-right dropdown-125 dropdown-lighter dropdown-close dropdown-caret">
			<li class="active"><a href="#"><div class="center small bolder blue">Ações em Lote</div></a></li>
			<li><a href="#">
				<div class="inline" id='zgDivAcoesExcID' style="width: 30px;"></div>
				<div class="inline" id='zgDivAcoesCanID' style="width: 30px;"></div>
				<div class="inline" id='zgDivAcoesConID' style="width: 30px;"></div>
				<div class="inline" id='zgDivAcoesSubID' style="width: 30px;"></div>
				<div class="inline" id='zgDivAcoesImpID' style="width: 30px;"></div>
			</a></li>
		</ul>
	</div>
	
	<button type="button" class="btn btn-white btn-sm" title="Avançar" id="btnCPListFiltroAvancarID" onclick="avancarDataCPLisFiltro();">
		<i class="fa fa-angle-double-right"></i>
	</button>
</div>

<div id="divPopoverCPLisFiltroContentID" class="hide">
	<div class="col-sm-12 hide" id="divCPLisFiltroContentDiarioID">
		<label class="col-sm-3 control-label">Dia:</label>
		<div class="col-xs-12 col-sm-9">
    		<input class='form-control' id='tempDataFiltroID' type='text' maxlength='10' onchange="copiaValoresFormCPLisFiltro();" value='%DATA_FILTRO%' autocomplete='off' zg-data-toggle='mask' zg-data-mask='data'>
		</div>
	</div>
	<div class="col-sm-12 hide" id="divCPLisFiltroContentMensalID">
		<label class="col-sm-3 control-label">Mês:</label>
		<div class="col-xs-12 col-sm-9">
    		<input class='form-control datepicker col-md-12' id='tempMesFiltroID' onchange="copiaValoresFormCPLisFiltro();" value='%MES_FILTRO%' type='text' maxlength='7' autocomplete='off'>
		</div>
	</div>
	<div class="form-group col-sm-12 hide" id="divCPLisFiltroContentPeriodoID">
		<label class="col-sm-3 control-label">Período:</label>
		<div class="col-xs-12 col-sm-9 input-daterange input-group">
			<input type="text" class="input-sm form-control" id="tempDataIniFiltroID" onchange="copiaValoresFormCPLisFiltro();" maxlength='10' value='%DATA_INI_FILTRO%' autocomplete='off' zg-data-toggle='mask' zg-data-mask='data'/>
			<span class="input-group-addon"><i class="fa fa-exchange"></i></span>
			<input type="text" class="input-sm form-control"  id="tempDataFimFiltroID" onchange="copiaValoresFormCPLisFiltro();" maxlength='10' value='%DATA_FIM_FILTRO%' autocomplete='off' zg-data-toggle='mask' zg-data-mask='data'/>
		</div>
	</div>
	<div class="form-group col-sm-12 center">
	&nbsp;
	</div>
	
	<div class="form-group col-sm-12 center">
		<label class="col-sm-3 control-label">Filtrar Por:</label>
		<div class="btn-group btn-corner col-sm-9 center">
			<span id="CPLisFiltroDataTipoEmiID" style="width: 100px;" class="btn btn-sm" onclick="selecionaEmissaoCPLisFiltro();">Emissão</span>
			<span id="CPLisFiltroDataTipoVenID" style="width: 100px;" class="btn btn-sm" onclick="selecionaVencimentoCPLisFiltro();">Vencimento</span>
		</div>
	</div>

	<div class="form-group col-sm-12 center">
	&nbsp;
	</div>
	<label class="col-sm-3 control-label">&nbsp;</label>
	<div class="btn-group btn-corner col-sm-9 center">
		<button type='button' class='btn btn-success btn-sm' onclick="CPLisFilter();">Filtrar</button>
		<button type='button' class='btn btn-danger btn-sm' onclick='fecharPopoverCPLisFiltro();'>Fechar</button>
	</div>
</div>
<div id="divPopoverCPLisFiltroDataTitleID" class="hide">
	<div class='btn-group btn-corner' style="width: 370px;">
		<button type='button' class='btn btn-white btn-sm' style='width:120px;' onclick='mostraDiarioCPLisFiltro();'>Diário</button>
		<button type='button' class='btn btn-white btn-sm' style='width:120px;' onclick='mostraMensalCPLisFiltro();'>Mensal</button>
		<button type='button' class='btn btn-white btn-sm' style='width:120px;' onclick='mostraPeriodoCPLisFiltro();'>Período</button>
	</div>
</div>
</form>
<script>

$('[data-rel=tooltip]').tooltip();

function CPLisFilter() {
	copiaValoresFormCPLisFiltro();
	$('#zgFormFiltroID').submit();
}

function copiaValoresFormCPLisFiltro() {
	var $data,$mes,$dataIni,$dataFim;
	
	$data		= $('#tempDataFiltroID').val();
	$mes		= $('#tempMesFiltroID').val();
	$dataIni	= $('#tempDataIniFiltroID').val();
	$dataFim	= $('#tempDataFimFiltroID').val();
	
	if (!$data)		$data		= "all";
	if (!$mes)		$mes		= "all";
	if (!$dataIni)	$dataIni	= "all";
	if (!$dataFim)	$dataFim	= "all";
	
	
	/** Copiar valores para o outro form **/
	$('#dataFiltroID').val( $data );
	$('#mesFiltroID').val( $mes );
	$('#dataIniFiltroID').val( $dataIni );
	$('#dataFimFiltroID').val( $dataFim );

}


function selecionaEmissaoCPLisFiltro() {
	$('#CPLisFiltroDataTipoEmiID').addClass("btn-primary");
	$('#CPLisFiltroDataTipoEmiID').removeClass("btn-light");
	$('#CPLisFiltroDataTipoVenID').addClass("btn-light");
	$('#CPLisFiltroDataTipoVenID').removeClass("btn-primary");
	$('#dataTipoID').val("E");
}

function selecionaVencimentoCPLisFiltro() {
	$('#CPLisFiltroDataTipoVenID').addClass("btn-primary");
	$('#CPLisFiltroDataTipoVenID').removeClass("btn-light");
	$('#CPLisFiltroDataTipoEmiID').addClass("btn-light");
	$('#CPLisFiltroDataTipoEmiID').removeClass("btn-primary");
	$('#dataTipoID').val("V");
}


function avancarDataCPLisFiltro() {
	$('#dataAvancarID').val(1);
	$('#dataVoltarID').val(0);
	CPLisFilter();
}

function voltarDataCPLisFiltro() {
	$('#dataAvancarID').val(0);
	$('#dataVoltarID').val(1);
	CPLisFilter();
}

function fecharPopoverCPLisFiltro() {
	$("#CPLisFiltroPopoverID").popover("hide");
}

function mostraDiarioCPLisFiltro() {
	$('#btnCPListFiltroVoltarID').removeAttr('disabled');
	$('#btnCPListFiltroAvancarID').removeAttr('disabled');
	$('#codTipoFiltroID').val("D");
	$('#divCPLisFiltroContentMensalID').addClass("hide");
	$('#divCPLisFiltroContentPeriodoID').addClass("hide");
	$('#divCPLisFiltroContentDiarioID').removeClass("hide");
}

function mostraMensalCPLisFiltro() {
	$('#btnCPListFiltroVoltarID').removeAttr('disabled');
	$('#btnCPListFiltroAvancarID').removeAttr('disabled');
	$('#codTipoFiltroID').val("M");
	$('#divCPLisFiltroContentDiarioID').addClass("hide");
	$('#divCPLisFiltroContentPeriodoID').addClass("hide");
	$('#divCPLisFiltroContentMensalID').removeClass("hide");
}


function mostraPeriodoCPLisFiltro() {
	$('#btnCPListFiltroVoltarID').attr('disabled','disabled');
	$('#btnCPListFiltroAvancarID').attr('disabled','disabled');
	$('#codTipoFiltroID').val("P");
	$('#divCPLisFiltroContentDiarioID').addClass("hide");
	$('#divCPLisFiltroContentMensalID').addClass("hide");
	$('#divCPLisFiltroContentPeriodoID').removeClass("hide");
}



$( document ).ready(function() {
	
	
	var tmp = $.fn.popover.Constructor.prototype.show;
	$.fn.popover.Constructor.prototype.show = function () {
	tmp.call(this);
		if (this.options.callback) {
			this.options.callback();
		}
	}
	
	$('[data-rel=popover]').popover({ 
		html:true,
		content: function() {
			return $('#divPopoverCPLisFiltroContentID').html();
		},
		title: function() {
			return $('#divPopoverCPLisFiltroDataTitleID').html();
		},
		callback: function() {
			$('#tempDataFiltroID').datepicker({autoclose: true,todayHighlight: true,todayBtn: true});
			$('#tempMesFiltroID').datepicker({autoclose: true,format: "mm/yyyy",viewMode: "months", minViewMode: "months"});
			$('.input-daterange').datepicker({autoclose: true,todayHighlight: true,todayBtn: true});
		} 
	}).on("show.bs.popover", function () {
		var $tip	= $(this).data("bs.popover").tip();
		$tip.css("max-width", "600px");
	});
	
	var $tipoFiltro	= $('#codTipoFiltroID').val(); 
	var $tipoData	= $('#dataTipoID').val();
	
	if ( $tipoFiltro == 'P') {
		mostraPeriodoCPLisFiltro();
	}else if ($tipoFiltro == 'M') {
		mostraMensalCPLisFiltro();
	}else{
		mostraDiarioCPLisFiltro();
	}

	if ( $tipoData == 'E') {
		selecionaEmissaoCPLisFiltro();
	}else{
		selecionaVencimentoCPLisFiltro();
	}
	
});


</script>