<div id="content">
	<div class="page-header">
		<h1 style="display:inline-block; width:50%;"><i class="%IC%">&nbsp;</i>Transferência
			<a id='a01ID' class='btn btn-white ' title="Voltar" href="javascript:zgLoadUrl('%URLVOLTAR%');"><i class="fa fa-arrow-left bigger-130"></i></a>
			<a id='a01ID' class='btn btn-white ' title="Novo Cadastro" href="javascript:zgLoadUrl('%URLNOVO%');"><i class="fa fa-file bigger-130"></i></a>
		</h1>
		<div class="pull-right" style="display:inline-block;">
			<span id="btnConID" class="btn btn-app btn-xs btn-light" data-toggle="popover" data-trigger="hover" data-placement="top" data-content="Confirmar o pagamento (Realizar a baixa da conta)"><i class="ace-icon fa fa-check bigger-150 green"></i></span>
			<span id="btnHisID" class="btn btn-app btn-xs btn-light" data-toggle="popover" data-trigger="hover" data-placement="top" data-content="Visualizar Histórico de pagamento"><i class="ace-icon fa fa-history bigger-150 yellow"></i></span>
			<span id="btnCanID" class="btn btn-app btn-xs btn-light" data-toggle="popover" data-trigger="hover" data-placement="top" data-content="Cancelar a conta"><i class="ace-icon fa fa-ban bigger-150 red"></i></span>
			<span id="btnImpID" class="btn btn-app btn-xs btn-light" data-toggle="popover" data-trigger="hover" data-placement="top" data-content="Gerar o PDF para impressão"><i class="ace-icon fa fa-print bigger-150"></i></span>
		</div>
	</div><!-- /.page-header -->

	<div id="user-profile-3" class="user-profile row">
		<form id="zgFormID" class="form-horizontal">
		<input type="hidden" name="id" value="%ID%">
		<input type="hidden" name="_edit" value="1">
		<input type="hidden" id="codTransfID" name="codTransf" value="%COD_TRANSF%">
		<input type="hidden" id="codStatusID" name="codStatus" value="%COD_STATUS%">
		<input type="hidden" id="codParcelaID" name="parcela" value="%PARCELA%">
		<input type="hidden" id="indValorParcelaID" name="indValorParcela" value="1">
		<input type="hidden" id="codTipoValorID" name="codTipoValor" value="P">
		<input type="hidden" id="codTipoRecID" name="codTipoRec" value="%COD_TIPO_REC%">
		<input type="hidden" id="valorTotalID" name="valorTotal">
		<input type="hidden" id="aDataID" name="aData[]">
		<input type="hidden" id="aValorID" name="aValor[]">
		
		
		<div class="col-sm-9">
			<div class="tabbable">
				<ul class="nav nav-tabs padding-12 background-blue">
					<li>
						<a data-toggle="tab" href="#contaPagar-recorrencia"><i class="green fa fa-refresh bigger-125"></i>Recorrência</a>
					</li>
					<li class="active">
						<a data-toggle="tab" href="#contaPagar-principal"><i class="blue fa fa-edit bigger-125"></i>Identificação</a>
					</li>
					<li>
						<a data-toggle="tab" href="#contaPagar-valores"><i class="purple fa fa-usd bigger-125"></i>Valores</a>
					</li>
					<li>
						<a data-toggle="tab" href="#contaPagar-configuracoes"><i class="grey fa fa-cog bigger-125"></i>Configurações</a>
					</li>
				</ul>

				<div class="tab-content profile-edit-tab-content">
					<div id="contaPagar-recorrencia" class="tab-pane in">
						<div class="row ">
							<div class="form-group col-sm-12" id="divRecorrenciaID">
								<label class="col-sm-3 control-label">Recorrência</label>
								<div class="btn-group btn-corner col-sm-8 pull-left">
									<span id='codTipoRecUID' style="width: 180px;" class="btn btn-sm">Única</span>
									<span tabindex="99001" class="btn btn-sm btn-info"><i class="ace-icon fa fa-question-circle" data-rel="popover" data-placement="top" data-trigger="hover" data-original-title="<i class='ace-icon fa fa-question-circle red'></i> Ajuda" data-content="Informe se a conta será única ou parcelada"></i></span>
									<span id='codTipoRecPID' style="width: 180px;" class="btn btn-sm">Parcelada</span>
								</div>
							</div>
						</div>
						<div class="row " id="divRecParcelaID">
					    	<div class="form-group col-sm-12" id="divNumParcelasID">
								<label class="col-sm-3 control-label">Num. de Parcelas</label>
				    			<div class="input-group col-sm-2">
				    				<div class="input-group col-sm-10 pull-left">
					    				<span tabindex="99001" class="input-group-addon"><i class="ace-icon fa fa-question-circle" data-rel="popover" data-placement="top" data-trigger="hover" data-original-title="<i class='ace-icon fa fa-question-circle red'></i> Ajuda" data-content="Número de parcelas"></i></span>
							    		<input class="form-control" readonly id="numParcelasID" value="%NUM_PARCELAS%" type="text" name="numParcelas"  maxlength="2" autocomplete="off" zg-data-toggle="mask" zg-data-mask="numero">
							    	</div>
							    </div>
					    	</div>
					    	<div class="form-group col-sm-12" id="divParcelaInicialID">
								<label class="col-sm-3 control-label">Parcela Inicial</label>
				    			<div class="input-group col-sm-2">
				    				<div class="input-group col-sm-10 pull-left">
					    				<span tabindex="99002" class="input-group-addon"><i class="ace-icon fa fa-question-circle" data-rel="popover" data-placement="top" data-trigger="hover" data-original-title="<i class='ace-icon fa fa-question-circle red'></i> Ajuda" data-content="Parcela inicial que será considerada (o número total de parcelas será: NUM_PARCELAS - PARCELA_INICIAL)"></i></span>
							    		<input class="form-control" readonly id="parcelaInicialID" value="%PARCELA_INICIAL%" type="text" name="parcelaInicial"  maxlength="2" autocomplete="off" zg-data-toggle="mask" zg-data-mask="numero">
							    	</div>
							    </div>
					    	</div>
							<div class="form-group col-sm-12" id="divPeriodoRecID">
								<label class="col-sm-3 control-label">Repete-se a cada</label>
				    			<div class="input-group col-sm-2 pull-left">
				    				<div class="input-group col-sm-10 pull-left">
					    				<span tabindex="99003" class="input-group-addon"><i class="ace-icon fa fa-question-circle" data-rel="popover" data-placement="top" data-trigger="hover" data-original-title="<i class='ace-icon fa fa-question-circle red'></i> Ajuda" data-content="Intervalo de repetição"></i></span>
					    				<input class="form-control" readonly  id="intervaloRecID" type="text" name="intervaloRec" maxlength="2" value="%INTERVALO_REC%" autocomplete="off" zg-data-toggle="mask" zg-data-mask="numero">
					    			</div>
					    		</div>
					    		<div class="input-group col-sm-3 pull-left">
					    			<div class="input-group col-sm-10 pull-left">
					    				<span tabindex="99004" class="input-group-addon"><i class="ace-icon fa fa-question-circle" data-rel="popover" data-placement="top" data-trigger="hover" data-original-title="<i class='ace-icon fa fa-question-circle red'></i> Ajuda" data-content="Período de Recorrência da Conta"></i></span>
										<select class="select2 readonly" style="width:100%;" id="codPeriodoRecID" name="codPeriodoRec" data-rel="select2">
										%PERIODOS_REC%
										</select>
									</div>
							    </div>
					    	</div>
						</div>
					</div>
					<div id="contaPagar-principal" class="tab-pane in active">
						<div class="row">
							<div class="form-group col-sm-12" id="divNumeroID">
								<label class="col-sm-3 control-label">Número</label>
				    			<div class="input-group col-sm-4 pull-left">
				    				<span tabindex="99001" class="input-group-addon"><i class="ace-icon fa fa-question-circle" data-rel="popover" data-placement="top" data-trigger="hover" data-original-title="<i class='ace-icon fa fa-question-circle red'></i> Ajuda" data-content="Número identificador da Conta"></i></span>
					    			<input class="form-control" id="numeroID" type="text" name="numero" maxlength="20" value="%NUMERO%" READONLY autocomplete="off">
							    </div>
								<div class="help-block col-sm-5 inline" id="divHelpNumeroID"></div>
					    	</div>
						</div>
					    
						<div class="row">
							<div class="form-group col-sm-12" id="divDescricaoID">
								<label class="col-sm-3 control-label">Descrição</label>
				    			<div class="input-group col-sm-4 pull-left">
				    				<span tabindex="99002" class="input-group-addon"><i class="ace-icon fa fa-question-circle" data-rel="popover" data-placement="top" data-trigger="hover" data-original-title="<i class='ace-icon fa fa-question-circle red'></i> Ajuda" data-content="Descrição da Conta a Pagar"></i></span>
					    			<input onchange="validaIdentificacaoTRAlt()" class="form-control" id="descricaoID" type="text" name="descricao" maxlength="60" value="%DESCRICAO%" autocomplete="off" %TEXT_VIEW%>
							    </div>
								<div class="help-block col-sm-5 inline" id="divHelpDescricaoID"></div>
					    	</div>
						</div>
						<div class="row">
							<div class="form-group col-sm-12" id="divDataTransfID">
								<label class="col-sm-3 control-label">Data da Transferência</label>
				    			<div class="input-group col-sm-4 pull-left">
				    				<span tabindex="99003" class="input-group-addon"><i class="ace-icon fa fa-question-circle" data-rel="popover" data-placement="top" data-trigger="hover" data-original-title="<i class='ace-icon fa fa-question-circle red'></i> Ajuda" data-content="Data de vencimento da conta"></i></span>
					    			<input onchange="validaIdentificacaoTRAlt()" class="form-control datepicker" id="dataTransfID" type="text" name="dataTransf" maxlength="10" value="%DATA_TRANSF%" autocomplete="off" zg-data-toggle="mask" zg-data-mask="data" %TEXT_VIEW%>
							    </div>
								<div class="help-block col-sm-5 inline" id="divHelpDataTransfID"></div>
					    	</div>
						</div>
						<div class="row">
							<div class="form-group col-sm-12" id="divParcelaID">
								<label class="col-sm-3 control-label">Parcela</label>
				    			<div class="input-group col-sm-4 pull-left">
				    				<span tabindex="99004" class="input-group-addon"><i class="ace-icon fa fa-question-circle" data-rel="popover" data-placement="top" data-trigger="hover" data-original-title="<i class='ace-icon fa fa-question-circle red'></i> Ajuda" data-content="Número da Parcela"></i></span>
					    			<input readonly class="form-control" type="text"  maxlength="4" value="(%PARCELA%/%NUM_PARCELAS%)" autocomplete="off">
							    </div>
								<div class="help-block col-sm-5 inline" id="divHelpParcelaID"></div>
					    	</div>
						</div>
						
					</div>
					<div id="contaPagar-valores" class="tab-pane in">
						<div class="row">
							<div class="form-group col-sm-12" id="divValorID">
								<label class="col-sm-3 control-label">Valor</label>
				    			<div class="input-group col-sm-4 pull-left">
				    				<span tabindex="99007" class="input-group-addon"><i class="ace-icon fa fa-question-circle" data-rel="popover" data-placement="top" data-trigger="hover" data-original-title="<i class='ace-icon fa fa-question-circle red'></i> Ajuda" data-content="Valor da conta"></i></span>
					    			<input onchange="atualizaInfoValorTRAlt()" class="form-control" id="valorID" type="text" name="valor" maxlength="20" value="%VALOR%" autocomplete="off" required zg-data-toggle="mask" zg-data-mask="dinheiro" zg-data-mask-retira="0" %TEXT_VIEW%>
							    </div>
								<div class="help-block col-sm-5 inline" id="divHelpValorID"></div>
					    	</div>
						</div>
						<div class="row">
							<div class="form-group col-sm-12" id="divValorCanceladoID">
								<label class="col-sm-3 control-label">Cancelado</label>
				    			<div class="input-group col-sm-4 pull-left">
				    				<span tabindex="99010" class="input-group-addon"><i class="ace-icon fa fa-question-circle" data-rel="popover" data-placement="top" data-trigger="hover" data-original-title="<i class='ace-icon fa fa-question-circle red'></i> Ajuda" data-content="Desconto total"></i></span>
					    			<input onchange="atualizaInfoValorTRAlt()" class="form-control" id="valorCanceladoID" type="text" name="valorCancelado" maxlength="20" value="%VALOR_CANCELADO%" autocomplete="off" zg-data-toggle="mask" zg-data-mask="dinheiro" zg-data-mask-retira="0" %TEXT_VIEW%>
							    </div>
								<div class="help-block col-sm-5 inline" id="divHelpValorCanceladoID"></div>
					    	</div>
						</div>
					</div>
					<div id="contaPagar-configuracoes" class="tab-pane in">
						<div class="row">
							<div class="form-group col-sm-12" id="divFormaPagID">
								<label class="col-sm-3 control-label">Forma de Pag.</label>
				    			<div class="input-group col-sm-4 pull-left">
				    				<span tabindex="99011" class="input-group-addon"><i class="ace-icon fa fa-question-circle" data-rel="popover" data-placement="top" data-trigger="hover" data-original-title="<i class='ace-icon fa fa-question-circle red'></i> Ajuda" data-content="Selecione a Forma de Pagamento da Conta"></i></span>
									<select class="select2 %SELECT_VIEW%" style="width:100%;" id="codFormaPagID" name="codFormaPag" data-rel="select2" onchange="atualizaInfoFormaPagTRAlt();">
									%FORMAS_PAG%
									</select>
							    </div>
							    <div class="help-block col-sm-5 inline" id="divHelpFormaPagID"></div>
					    	</div>
						</div>
						<div class="row">
							<div class="form-group col-sm-12" id="divContaOrigID">
								<label class="col-sm-3 control-label">Conta de Origem</label>
				    			<div class="input-group col-sm-4 pull-left">
				    				<span tabindex="99012" class="input-group-addon"><i class="ace-icon fa fa-question-circle" data-rel="popover" data-placement="top" data-trigger="hover" data-original-title="<i class='ace-icon fa fa-question-circle red'></i> Ajuda" data-content="Conta de Pagamento (Conta que será debitado o valor)"></i></span>
									<select class="select2 %SELECT_VIEW%" style="width:100%;" id="codContaOrigID" name="codContaOrig" data-rel="select2" onchange="atualizaInfoContaOrigTRAlt();">
									%CONTAS_ORIG%
									</select>
							    </div>
							    <div class="help-block col-sm-5 inline" id="divHelpContaOrigID"></div>
					    	</div>
						</div>
						<div class="row">
							<div class="form-group col-sm-12" id="divContaDestID">
								<label class="col-sm-3 control-label">Conta de Destino</label>
				    			<div class="input-group col-sm-4 pull-left">
				    				<span tabindex="99012" class="input-group-addon"><i class="ace-icon fa fa-question-circle" data-rel="popover" data-placement="top" data-trigger="hover" data-original-title="<i class='ace-icon fa fa-question-circle red'></i> Ajuda" data-content="Conta de Pagamento (Conta que será debitado o valor)"></i></span>
									<select class="select2 %SELECT_VIEW%" style="width:100%;" id="codContaDestID" name="codContaDest" data-rel="select2" onchange="atualizaInfoContaDestTRAlt();">
									%CONTAS_DEST%
									</select>
							    </div>
							    <div class="help-block col-sm-5 inline" id="divHelpContaOrigID"></div>
					    	</div>
						</div>
						<div class="row">
							<div class="form-group col-sm-12" id="divFlagAlterarSeqID">
			    				<label class="col-sm-3 control-label">
			    					<input name="flagAlterarSeq" id="flagAlterarSeqID" class="ace ace-switch"  type="checkbox" %BUTTON_VIEW%/>
			    					<span class="lbl" data-lbl="SIM&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;NÃO">&nbsp;&nbsp;</span>
			    				</label>
							
				    			<div class="input-group col-sm-4 pull-left">
				    				<span tabindex="99005" class="input-group-addon"><i class="ace-icon fa fa-question-circle" data-rel="popover" data-placement="top" data-trigger="hover" data-original-title="<i class='ace-icon fa fa-question-circle red'></i> Ajuda" data-content="Marque SIM para que as transferências parceladas que fazem parte dessa mesma transferência também sejam alteradas (somente as próximas da sequência) "></i></span>
				    				<input readonly type="text" class="form-control" placeholder="Alterar as transferências na sequência ?" aria-describedby="sizing-addon2">
							    </div>
							    <div class="help-block col-sm-5 inline" id="divHelpFlagAlterarSeqID"></div>
					    	</div>
					    </div>
						<div class="row" id="divFlagPagarAutoID">
							<div class="form-group col-sm-12" >
			    				<label class="col-sm-3 control-label">
			    					<input name="flagPagarAuto" id="flagPagarAutoID" class="ace ace-switch" %FLAG_PAGAR_AUTO% type="checkbox" %BUTTON_VIEW%/>
			    					<span class="lbl" data-lbl="SIM&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;NÃO">&nbsp;&nbsp;</span>
			    				</label>
							
				    			<div class="input-group col-sm-4 pull-left">
				    				<span tabindex="99014" class="input-group-addon"><i class="ace-icon fa fa-question-circle" data-rel="popover" data-placement="top" data-trigger="hover" data-original-title="<i class='ace-icon fa fa-question-circle red'></i> Ajuda" data-content="Marque SIM para que o sistema faça a baixa automática da conta na data de vencimento dela"></i></span>
				    				<input readonly type="text" class="form-control" placeholder="Confirmar automaticamente na data de vencimento ?" aria-describedby="sizing-addon2">
							    </div>
							    <div class="help-block col-sm-5 inline" id="divHelpFlagPagaID"></div>
					    	</div>
						</div>
						<div class="row">
							<div class="form-group col-sm-12" id="divDocumentoID">
								<label class="col-sm-3 control-label">Documento</label>
				    			<div class="input-group col-sm-4 pull-left">
				    				<span tabindex="99018" class="input-group-addon"><i class="ace-icon fa fa-question-circle" data-rel="popover" data-placement="top" data-trigger="hover" data-original-title="<i class='ace-icon fa fa-question-circle red'></i> Ajuda" data-content="Documento (Você pode especificar algum documento relativo a conta)"></i></span>
				    				<input class="form-control" id="documentoID" type="text" name="documento" maxlength="20" value="%DOCUMENTO%" autocomplete="off" %TEXT_VIEW%>
							    </div>
							    <div class="help-block col-sm-5 inline" id="divHelpDocumentoID"></div>
					    	</div>
						</div>
						<div class="row">
							<div class="form-group col-sm-12" id="divObsID">
								<label class="col-sm-3 control-label">Observações</label>
				    			<div class="input-group col-sm-4 pull-left">
				    				<span tabindex="99018" class="input-group-addon"><i class="ace-icon fa fa-question-circle" data-rel="popover" data-placement="top" data-trigger="hover" data-original-title="<i class='ace-icon fa fa-question-circle red'></i> Ajuda" data-content="Observações adicionais"></i></span>
				    				<textarea class="form-control limited" id="obsID" maxlength="400" name="obs" autocomplete="off" %TEXT_VIEW%>%OBS%</textarea>
							    </div>
							    <div class="help-block col-sm-5 inline" id="divHelpObsID"></div>
					    	</div>
						</div>
					</div>
				</div>
			</div>
			<div class="clearfix form-actions">
				<label class="col-sm-5 control-label" >&nbsp;</label>
   				<button type="button" class="btn btn-primary" id="btnSubmitID" %BUTTON_VIEW%><i class="fa fa-check bigger-110"></i> Salvar</button>
			</div>
			
		</div>
		
		<div class="col-sm-3 pull-right">
			<div class="widget-box">
				<div class="widget-header widget-header-flat widget-header-small center">
					<h5 class="widget-title">Resumo</h5>
				</div>
				<div class="widget-body">
					<div class="widget-main small">
						<div class="row hidden" id="divInfoTipoContaID">
							<h6 class="header widget-header widget-header-small blue bolder smaller">&nbsp;Recorrência</h6>
							<div class="vspace-xs"></div>
							<div class="col-sm-12">
						    	<p class="col-sm-4 pull-left align-right text-info inline" style="padding: 2px; margin:0;">Tipo:</p>
						    	<p id='lbInfoTipoContaID' class="col-sm-8 pull-right align-left" style="padding: 2px; margin:0;"></p>
					    	</div>
						</div>
						<div class="row hidden" id="divInfoRecorrenciaID">
							<div class="col-sm-12">
						    	<p class="col-sm-4 pull-left align-right text-info inline" style="padding: 2px; margin:0;">Período:</p>
						    	<p id='lbInfoRecorrenciaID' class="col-sm-8 pull-right align-left" style="padding: 2px; margin:0;"></p>
					    	</div>
						</div>
						<div class="row hidden" id="divInfoNumParcelasID">
							<div class="col-sm-12">
						    	<p class="col-sm-4 pull-left align-right text-info inline" style="padding: 2px; margin:0;">Parcela:</p>
						    	<p id='lbInfoNumParcelasID' class="col-sm-8 pull-right align-left" style="padding: 2px; margin:0;"></p>
					    	</div>
						</div>
						<div class="row hidden" id="divInfoIdentID">
							<h6 class="header widget-header widget-header-small blue bolder smaller">&nbsp;Identificação</h6>
							<div class="vspace-xs"></div>
							<div class="col-sm-12">
						    	<p class="col-sm-4 pull-left align-right text-info inline" style="padding: 2px; margin:0;">Identificação:</p>
						    	<p id='lbInfoIdentID' class="col-sm-8 pull-right align-left" style="padding: 2px; margin:0;"></p>
					    	</div>
						</div>
						<div class="row hidden" id="divInfoDataTransfID">
							<div class="col-sm-12">
						    	<p class="col-sm-4 pull-left align-right text-info inline" style="padding: 2px; margin:0;">Data Transf:</p>
						    	<p id='lbInfoDataTransfID' class="col-sm-8 pull-right align-left" style="padding: 2px; margin:0;"></p>
					    	</div>
						</div>
						<div class="row hidden" id="divInfoValorID">
							<h6 class="header widget-header widget-header-small blue bolder smaller">&nbsp;Valores</h6>
							<div class="vspace-xs"></div>
							<div class="col-sm-12">
						    	<p class="col-sm-4 pull-left align-right text-info inline" style="padding: 2px; margin:0;">Valor Total:</p>
						    	<p id='lbInfoValorID' class="col-sm-8 pull-right align-left" style="padding: 2px; margin:0;"></p>
					    	</div>
						</div>
						<div class="row hidden" id="divInfoConfID">
							<h6 class="header widget-header widget-header-small blue bolder smaller">&nbsp;Configurações</h6>
							<div class="vspace-xs"></div>
						</div>
						<div class="row hidden" id="divInfoFormaPagID">
							<div class="col-sm-12">
						    	<p class="col-sm-4 pull-left align-right text-info inline" style="padding: 2px; margin:0;">Forma Pag:</p>
						    	<p id='lbInfoFormaPagID' class="col-sm-8 pull-right align-left" style="padding: 2px; margin:0;"></p>
					    	</div>
						</div>
						<div class="row hidden" id="divInfoContaOrigID">
							<div class="col-sm-12">
						    	<p class="col-sm-4 pull-left align-right text-info inline" style="padding: 2px; margin:0;">Conta Orig:</p>
						    	<p id='lbInfoContaOrigID' class="col-sm-8 pull-right align-left" style="padding: 2px; margin:0;"></p>
					    	</div>
						</div>
						<div class="row hidden" id="divInfoSaldoContaOrigID">
							<div class="col-sm-12">
						    	<p class="col-sm-4 pull-left align-right text-info inline" style="padding: 2px; margin:0;">Saldo Origem:</p>
						    	<p id='lbInfoSaldoContaOrigID' class="col-sm-8 pull-right align-left" style="padding: 2px; margin:0;"></p>
					    	</div>
						</div>
						<div class="row hidden" id="divInfoContaDestID">
							<div class="col-sm-12">
						    	<p class="col-sm-4 pull-left align-right text-info inline" style="padding: 2px; margin:0;">Conta Dest:</p>
						    	<p id='lbInfoContaDestID' class="col-sm-8 pull-right align-left" style="padding: 2px; margin:0;"></p>
					    	</div>
						</div>
						<div class="row hidden" id="divInfoSaldoContaDestID">
							<div class="col-sm-12">
						    	<p class="col-sm-4 pull-left align-right text-info inline" style="padding: 2px; margin:0;">Saldo Destino:</p>
						    	<p id='lbInfoSaldoContaDestID' class="col-sm-8 pull-right align-left" style="padding: 2px; margin:0;"></p>
					    	</div>
						</div>
						<div class="row" id="divInfoCancID">
							<h6 class="header blue bolder smaller">&nbsp;Cancelamento</h6>
							<div class="vspace-xs"></div>
							<div class="col-sm-12">
						    	<p class="col-sm-4 pull-left align-right text-info inline" style="padding: 2px; margin:0;">Data Canc:</p>
						    	<p id='lbDataCancID' class="col-sm-8 pull-right align-left" style="padding: 2px; margin:0;">%DATA_CANC%</p>
					    	</div>
							<div class="col-sm-12">
						    	<p class="col-sm-4 pull-left align-right text-info inline" style="padding: 2px; margin:0;">Valor Canc.:</p>
						    	<p id='lbvalorCancID' class="col-sm-8 pull-right align-left" style="padding: 2px; margin:0;">%VALOR_CANC%</p>
					    	</div>
							<div class="col-sm-12">
						    	<p class="col-sm-4 pull-left align-right text-info inline" style="padding: 2px; margin:0;">Motivo:</p>
						    	<p id='lbmotivoID' class="col-sm-8 pull-right align-left" style="padding: 2px; margin:0;">%MOTIVO_CANC%</p>
					    	</div>
							<div class="col-sm-12">
						    	<p class="col-sm-4 pull-left align-right text-info inline" style="padding: 2px; margin:0;">Usuário:</p>
						    	<p id='lbuserCancID' class="col-sm-8 pull-right align-left" style="padding: 2px; margin:0;">%USER_CANC%</p>
					    	</div>
						</div>
					</div>
				</div>
			</div>
		</div>
		
		
		<div class="col-sm-4">
		</div>
		</form>
	</div>
</div>
<div id="divMsgContaID"></div>


<script type="text/javascript" charset="%CHARSET%">

$( "#zgDivModalDialogID" ).css( "width", function( index ) {
	return "74%";
});

$('#btnSubmitID').on("click", function(e) {
	var $valTotal	= parseFloat(getValorParcelaTRAlt().replace(".", "").replace(",","."));
	$('#valorTotalID').val($valTotal);
	$('#aDataID').eq(0).val($('#dataTransfID').val());
	$('#aValorID').eq(0).val($('#valorID').val());
	$('#zgFormID').submit();
});

$(".nav-tabs a[data-toggle=tab]").on("click", function(e) {
	if ($(this).hasClass("disabled")) {
		e.preventDefault();
		return false;
	}
});

$('[data-rel=tooltip]').tooltip();
$('[data-rel=popover]').popover({html:true});
$('[data-rel="select2"]').select2();
$('.datepicker').datepicker({"autoclose": true});

/** Desabilitar os selects para a tela de View **/
$('[data-rel="select2"]').each(function( index ) {
	if ($(this).hasClass('readonly')) {
		$(this).select2("readonly", true);
	}else{
		$(this).select2();
	}
});


$('textarea[class*=autosize]').autosize({append: "\n"});
$('textarea.limited').inputlimiter({
	remText: '%n caracteres restando...',
	limitText: 'Máximo Permitido : %n.'
});


$('[zg-data-toggle="mask"]').each(function( index ) {
	zgMask($( this ), $( this ).attr('zg-data-mask'));
});

$('#zgFormID').submit(function() {
	
	/** Retirar a máscara para os campos que estão configurados para tal **/
	$('[zg-data-mask-retira="1"]').each(function( index ) {
		$( this ).val($( this ).cleanVal());
	});

	/** Habilitar os SELECTS que estão desabilitados para poder enviar o valor **/
	$( "select" ).each(function( index ) {
		if ($(this).hasClass('readonly')) {
			$(this).prop( "disabled", false );
		}
	});
	
	$.ajax({
		type:	"POST", 
		url:	"%DP%",
		data:	$('#zgFormID').serialize(),
	}).done(function( data, textStatus, jqXHR) {

		/** Recolocar a máscara para os campos que estão configurados para tal **/
		$('[zg-data-mask-retira="1"]').each(function( index ) {
			zgMask($( this ), $( this ).attr('zg-data-mask'));
			$( this ).trigger('keyup');
		});
		
		if (checaRetornoOK(data) == true) {
			$('#codTransfID').val(zgGetCodRetorno(data));
			$('#numeroID').val(zgGetCodRetorno(data,2));
			$('#codStatusID').val(zgGetCodRetorno(data,3));
			$('#lbInfoStatusID').text(zgGetCodRetorno(data,4));
			calculaAcoesBotoesTRAlt();
			mostraInfoCancTRAlt();
		}

		zgMostraAviso("Fechar");
		
	}).fail(function( jqXHR, textStatus, errorThrown) {
		zgMostraAviso(jqXHR);
	});
	
	$( "select" ).each(function( index ) {
		if ($(this).hasClass('readonly')) {
			$(this).prop( "disabled", true );
		}
	});

	return false; 
});

var timer;

function selecionaTipoRecTRAlt() {
	var vTipoRec 		= $('#codTipoRecID').val();
	
	if (vTipoRec	== 'U') {
		selecionaContaUnicaTRAlt();
	}else if (vTipoRec	== 'P') {
		selecionaContaParceladaTRAlt();
	}
}

function selecionaContaUnicaTRAlt() {
	$('#codTipoRecUID').addClass("btn-primary");
	$('#codTipoRecUID').removeClass("btn-light");
	$('#codTipoRecPID').addClass("btn-light");
	$('#codTipoRecPID').removeClass("btn-primary");
	$('#codTipoRecID').val("U");
	mostraDivRecParcelaTRAlt();
}

function selecionaContaParceladaTRAlt() {
	$('#codTipoRecPID').addClass("btn-primary");
	$('#codTipoRecPID').removeClass("btn-light");
	$('#codTipoRecUID').addClass("btn-light");
	$('#codTipoRecUID').removeClass("btn-primary");
	$('#codTipoRecID').val("P");
	mostraDivRecParcelaTRAlt();
}



function getValorParcelaTRAlt() {
	var $tipoRecParc		= $('#codTipoRecID').val();
	var $codTipoValor		= $('#codTipoValorID').val();
	var $numParcelas		= parseInt($('#numParcelasID').val());
	var $parcelaInicial		= parseInt($('#parcelaInicialID').val());
	var $tipo,$parcelas;
	var $nValor,$valor,$valorParcela,$valorCancelado;
	
	$valor			= parseFloat($('#valorID').val().replace(".", "").replace(",","."));
	$valorCancelado	= parseFloat($('#valorCanceladoID').val().replace(".", "").replace(",","."));
	
	if (isNaN($valor))		$valor		= 0;
	
	$nValor			= ($valor - $valorCancelado).toFixed(2);

	if ($tipoRecParc	== 'P') {
		var $parcelas	= $numParcelas - ($parcelaInicial -1);
		
		if ($codTipoValor == 'T') {
			$nValor		= ($nValor / $parcelas).toFixed(2);
		}
	}

	var options = {
		symbol : "",
		decimal : ",",
		thousand: ".",
		precision : 2,
		format: "%s%v"
	};
	
	$nValor			= accounting.formatMoney($nValor, options);
	return ($nValor);
	
}



/** Controle de ações **/

function calculaAcoesBotoesTRAlt() {
	var $podeImp,$podeCan,$podeCon,$podeHis,$podeExc;

	switch ($('#codStatusID').val()) {
		case "P":
			$podeImp	= true;
			$podeCan	= true;
			$podeCon	= true;
			$podeHis	= false;
			$podeExc	= true;
			break;
		case "C":
			$podeImp	= false;
			$podeCan	= false;
			$podeCon	= false;
			$podeHis	= true;
			$podeExc	= true;
			break;
		case "R":
			$podeImp	= true;
			$podeCan	= false;
			$podeCon	= false;
			$podeHis	= true;
			$podeExc	= false;
			break;
		default:
			$podeImp	= false;
			$podeCan	= false;
			$podeCon	= false;
			$podeHis	= false;
			$podeExc	= false;
			break;
	}
	
	var $urlImp		= "%ROOT_URL%/Fin/contaPagarImp.php?id="+zgEncodeUrl("_codMenu_=%COD_MENU%&_icone_=%IC%&urlVoltar=%URL_EDITAR%&codConta="+$('#codTransfID').val());
	var $urlCan		= "%ROOT_URL%/Fin/contaPagarCan.php?id="+zgEncodeUrl("_codMenu_=%COD_MENU%&_icone_=%IC%&urlVoltar=%URL_EDITAR%&codConta="+$('#codTransfID').val());
	var $urlCon		= "%ROOT_URL%/Fin/contaPagarPag.php?id="+zgEncodeUrl("_codMenu_=%COD_MENU%&_icone_=%IC%&urlVoltar=%URL_EDITAR%&codConta="+$('#codTransfID').val());
	var $urlHis		= "%ROOT_URL%/Fin/contaPagarHis.php?id="+zgEncodeUrl("_codMenu_=%COD_MENU%&_icone_=%IC%&urlVoltar=%URL_EDITAR%&codConta="+$('#codTransfID').val());
	var $urlExc		= "%ROOT_URL%/Fin/contaPagarExc.php?id="+zgEncodeUrl("_codMenu_=%COD_MENU%&_icone_=%IC%&urlVoltar=%URL_EDITAR%&codConta="+$('#codTransfID').val());

	$('#btnImpID').unbind('click');
	$('#btnCanID').unbind('click');
	$('#btnConID').unbind('click');
	$('#btnHisID').unbind('click');
	$('#btnExcID').unbind('click');

	$('#btnImpID').click(function(){
		zgAbreModal($urlImp);
	});
	$('#btnCanID').click(function(){
		zgAbreModal($urlCan);
	});
	$('#btnConID').click(function(){
		zgAbreModal($urlCon);
	});
	$('#btnHisID').click(function(){
		zgAbreModal($urlHis);
	});
	$('#btnExcID').click(function(){
		zgAbreModal($urlExc);
	});
	
	($podeImp == true) ? $('#btnImpID').removeAttr("disabled") : $('#btnImpID').attr('disabled','disabled');
	($podeCan == true) ? $('#btnCanID').removeAttr("disabled") : $('#btnCanID').attr('disabled','disabled');
	($podeCon == true) ? $('#btnConID').removeAttr("disabled") : $('#btnConID').attr('disabled','disabled');
	($podeHis == true) ? $('#btnHisID').removeAttr("disabled") : $('#btnHisID').attr('disabled','disabled');
	($podeExc == true) ? $('#btnExcID').removeAttr("disabled") : $('#btnExcID').attr('disabled','disabled');

}

calculaAcoesBotoesTRAlt();
mostraInfoCancTRAlt();
selecionaTipoRecTRAlt();

atualizaInfoRecorrenciaTRAlt();
atualizaInfoIdentTRAlt();
atualizaInfoValorTRAlt();
atualizaDivPagaTRAlt();
atualizaInfoFormaPagTRAlt();
atualizaInfoContaOrigTRAlt();
atualizaInfoContaDestTRAlt();

function mostraInfoCancTRAlt() {
	var $valorCancelado	= $('#valorCanceladoID').val();

	if (parseFloat($valorCancelado) > 0) {
		$('#divInfoCancID').show();
		$('#divValorCanceladoID').show();
	}else{
		$('#divInfoCancID').hide();
		$('#divValorCanceladoID').hide();
	}
}


function mostraDivRecParcelaTRAlt() {
	var vTipoRec 		= $('#codTipoRecID').val();
	
	if (vTipoRec 	== 'U') {
		$('#divRecParcelaID').hide();
	}else if (vTipoRec 	== 'P') {
		$('#divRecParcelaID').show();
	}else{
		$('#divRecParcelaID').hide();
	}
}

function validaIdentificacaoTRAlt() {
	var $descricao		= $('#descricaoID').val();
	var $dataTransf		= $('#dataTransfID').val();
	var vOK				= true;
	
	$('#divDescricaoID').removeClass('has-error');
	$('#divDataTransfID').removeClass('has-error');
		
	$('#divHelpDescricaoID').html('');
	$('#divHelpDataTransfID').html('');

	if (!$descricao) {
		$('#divDescricaoID').addClass('has-error');
		$('#divHelpDescricaoID').html('"Descriçao" deve ser preenchida !!');
		vOK			= false;
	}else if ($descricao.length > 60) {
		$('#divDescricaoID').addClass('has-error');
		$('#divHelpDescricaoID').html('"Descrição" deve conter no máximo 60 caracteres');
		vOK			= false;
	}else if ($descricao.length < 2) {
		$('#divDescricaoID').addClass('has-error');
		$('#divHelpDescricaoID').html('"Descrição" deve conter no mínimo 2 caracteres');
		vOK			= false;
	}

	
	if (!$dataTransf) {
		$('#divDataTransfID').addClass('has-error');
		$('#divHelpDataTransfID').html('"Data de Transferência" deve ser preenchida !!');
		vOK			= false;
	}else if (isDataBR($dataTransf) == false) {
		$('#divDataTransfID').addClass('has-error');
		$('#divHelpDataTransfID').html('"Data de Transferência" inválida !!');
		vOK			= false;
	}

	
	if (vOK) {
		atualizaInfoIdentTRAlt();
	}
	
	return vOK;
}

function validaValoresTRAlt() {
	var $valor			= $('#valorID').val();
	var $juros			= $('#valorJurosID').val();
	var $mora			= $('#valorMoraID').val();
	var $desconto		= $('#valorDescontoID').val();
	
	
	var vOK				= true;
	
	$('#divValorID').removeClass('has-error');
	$('#divJurosID').removeClass('has-error');
	$('#divMoraID').removeClass('has-error');
	$('#divDescontoID').removeClass('has-error');
		
	$('#divHelpValorID').html('');
	$('#divHelpJurosID').html('');
	$('#divHelpMoraID').html('');
	$('#divHelpDescontoID').html('');
	
	if (!$valor) {
		$('#divValorID').addClass('has-error');
		$('#divHelpValorID').html('"Valor" deve ser preenchido !!');
		vOK			= false;
	}else if ($valor == 0) {
		$('#divValorID').addClass('has-error');
		$('#divHelpValorID').html('"Valor" deve ser maior que 0');
		vOK			= false;
	}else if (isMoney($valor) == false) {
		$('#divValorID').addClass('has-error');
		$('#divHelpValorID').html('"Valor" deve ser numérico');
		vOK			= false;
	}

	if (($juros) && (isMoney($juros) == false)) {
		$('#divJurosID').addClass('has-error');
		$('#divHelpJurosID').html('"Juros" deve ser numérico !!');
		vOK			= false;
	}

	if (($mora) && (isMoney($mora) == false)) {
		$('#divMoraID').addClass('has-error');
		$('#divHelpMoraID').html('"Mora" deve ser numérico !!');
		vOK			= false;
	}

	if (($desconto) && (isMoney($desconto) == false)) {
		$('#divDescontoID').addClass('has-error');
		$('#divHelpDescontoID').html('"Desconto" deve ser numérico !!');
		vOK			= false;
	}

	$('#difValorID').val($('#difValorTempID').val());

	
	return vOK;

}


function atualizaInfoRecorrenciaTRAlt() {
	var $tipoRecParc	= $('#codTipoRecID').val();
	var $numParcelas	= parseInt($('#numParcelasID').val());
	var $parcelaInicial	= parseInt($('#parcelaInicialID').val());
	var $codPeriodoRec	= $("#codPeriodoRecID option:selected").text();
	var	$parcela		= $("#codParcelaID").val();
	var $tipo,$parcelas;
	
	if ($tipoRecParc	== 'P') {
		$tipo			= "Parcelada";
		$parcelas		= $numParcelas - ($parcelaInicial - 1);
		
		$('#lbInfoRecorrenciaID').text($codPeriodoRec);
		$('#lbInfoNumParcelasID').text("("+$parcela+"/"+$parcelas+")");
		
		$('#divInfoRecorrenciaID').removeClass('hidden');
		$('#divInfoNumParcelasID').removeClass('hidden');
		
	}else{
		$tipo			= "Fixa";
	}
	
	$('#lbInfoTipoContaID').text($tipo);
	$('#divInfoTipoContaID').removeClass('hidden');
	
}

function atualizaInfoIdentTRAlt() {
	var $ident		= $('#descricaoID').val();
	var $venc		= $('#dataTransfID').val();
	
	$('#lbInfoIdentID').text($ident);
	$('#lbInfoDataTransfID').text($venc);

	$('#divInfoIdentID').removeClass('hidden');
	$('#divInfoDataTransfID').removeClass('hidden');
}


function atualizaInfoValorTRAlt() {
	var	$nValor		= getValorParcelaTRAlt();
	var $valor		= $('#valorID').val();
	if (!$valor) return null;
	
	$('#lbInfoValorID').html($nValor);
	$('#divInfoValorID').removeClass('hidden');
}

function atualizaDivPagaTRAlt() {
	var $venc			= $('#dataTransfID').val();
	var $tipoRecParc	= $('#codTipoRecID').val();
	var $numParcelas	= parseInt($('#numParcelasID').val());
	var $parcelaInicial	= parseInt($('#parcelaInicialID').val());
	var $codPeriodoRec	= $('#codPeriodoRecID').val();
	var $intervaloRec	= parseInt($('#intervaloRecID').val());
	var $dia,$mes,$ano,$temp,$oHoje,$oVencIni,$oVencFim,$diff,$parcFuturas;
	
	$temp	= $venc.split('/');
	$dia	= parseInt($temp[0]);
	$mes	= parseInt($temp[1]) - 1;
	$ano	= parseInt($temp[2]);

	$oVencIni	= new Date($ano,$mes,$dia);
	$oHoje		= new Date();
	$oHoje.setHours(0,0,0,0);
	
	$('#divFlagPagarAutoID').addClass('hidden');
	$('#divFlagPagaID').addClass('hidden');
	
	if ($tipoRecParc	== 'P') {
		$parcFuturas		= $numParcelas - ($parcelaInicial - 1) -1;
		
		if ($codPeriodoRec == "D") {
			$oVencFim	= new Date($ano,$mes,$dia + ($parcFuturas * $intervaloRec) );
		}else if ($codPeriodoRec == "S") {
			$oVencFim	= new Date($ano,$mes,$dia + ($parcFuturas * $intervaloRec * 7) );
		}else if ($codPeriodoRec == "M") {
			$oVencFim	= new Date($ano,$mes + ($parcFuturas * $intervaloRec),$dia );
		}else if ($codPeriodoRec == "A") {
			$oVencFim	= new Date($ano + ($parcFuturas * $intervaloRec),$mes,$dia );
		}else{
			alert('Erro: Período de Recorrência não tratado !!!');
			$('#divFlagPagarAutoID').removeClass('hidden');
			$('#divFlagPagaID').removeClass('hidden');
			return null;
		}
		
		if ($oVencIni <= $oHoje) {
			$('#divFlagPagaID').removeClass('hidden');
		}

		if ($oVencFim > $oHoje) {
			$('#divFlagPagarAutoID').removeClass('hidden');
		}
		
	}else{
		if ($oVencIni > $oHoje) {
			$('#divFlagPagarAutoID').removeClass('hidden');
		}else{
			$('#divFlagPagaID').removeClass('hidden');
		}
	}
	
	
	
}

function atualizaInfoFormaPagTRAlt() {
	var $desc	= $("#codFormaPagID option:selected").text();
	if ($desc)	{
		$('#lbInfoFormaPagID').html($desc);
		$('#divInfoConfID').removeClass('hidden');
		$('#divInfoFormaPagID').removeClass('hidden');
	}
}

function atualizaInfoContaOrigTRAlt() {
	var $desc	= $("#codContaOrigID option:selected").text();
	
	var options = {
			symbol : "R$ ",
			decimal : ",",
			thousand: ".",
			precision : 2,
			format: "%s%v"
	};
	
	if ($desc)	{
		$('#lbInfoContaOrigID').html($desc);
		$('#divInfoConfID').removeClass('hidden');
		$('#divInfoContaOrigID').removeClass('hidden');
		
		
		$.ajax({
			url: "%ROOT_URL%/Fin/getSaldoConta.dp.php",
			data:  { codConta: $('#codContaOrigID').val()},
			success: function(data) {
				var $saldo	= data["saldo"];
				var $desc;
				
				if ($saldo > 0) {
					$desc	= "<span class='text-success'>"+accounting.formatMoney($saldo, options)+"</span>";
				}else{
					$desc	= "<strong>(&nbsp;<span class='text-danger'>"+accounting.formatMoney($saldo, options)+"</span>&nbsp;)</strong>";
				}
				
				$('#lbInfoSaldoContaOrigID').html($desc);
				$('#divInfoSaldoContaOrigID').removeClass('hidden');
		    },
			dataType: 'json'
		});
	}
}

function atualizaInfoContaDestTRAlt() {
	var $desc	= $("#codContaDestID option:selected").text();
	
	var options = {
		symbol : "R$ ",
		decimal : ",",
		thousand: ".",
		precision : 2,
		format: "%s%v"
	};
	
	if ($desc)	{
		$('#lbInfoContaDestID').html($desc);
		$('#divInfoConfID').removeClass('hidden');
		$('#divInfoContaDestID').removeClass('hidden');
		
		
		$.ajax({
			url: "%ROOT_URL%/Fin/getSaldoConta.dp.php",
			data:  { codConta: $('#codContaDestID').val()},
			success: function(data) {
				var $saldo	= data["saldo"];
				var $desc;
				
				if ($saldo > 0) {
					$desc	= "<span class='text-success'>"+accounting.formatMoney($saldo, options)+"</span>";
				}else{
					$desc	= "<strong>(&nbsp;<span class='text-danger'>"+accounting.formatMoney($saldo, options)+"</span>&nbsp;)</strong>";
				}
				
				$('#lbInfoSaldoContaDestID').html($desc);
				$('#divInfoSaldoContaDestID').removeClass('hidden');
		    },
			dataType: 'json'
		});
	}
}

</script>
