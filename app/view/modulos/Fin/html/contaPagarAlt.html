<div id="content">
	<div class="page-header">
		<h1 style="display:inline-block; width:50%;"><i class="%IC%">&nbsp;</i>Conta a Pagar
			<a id='a01ID' class='btn btn-white ' title="Voltar" href="javascript:zgLoadUrl('%URLVOLTAR%');"><i class="fa fa-arrow-left bigger-130"></i></a>
			<a id='a01ID' class='btn btn-white ' title="Novo Cadastro" href="javascript:zgLoadUrl('%URLNOVO%');"><i class="fa fa-file bigger-130"></i></a>
		</h1>
		<div class="pull-right" style="display:inline-block;">
			<span id="btnConID" class="btn btn-app btn-xs btn-light" data-toggle="popover" data-trigger="hover" data-placement="top" data-content="Confirmar o pagamento (Realizar a baixa da conta)"><i class="ace-icon fa fa-check bigger-150 green"></i></span>
			<span id="btnHisID" class="btn btn-app btn-xs btn-light" data-toggle="popover" data-trigger="hover" data-placement="top" data-content="Visualizar Histórico de pagamento"><i class="ace-icon fa fa-history bigger-150 yellow"></i></span>
			<span id="btnCanID" class="btn btn-app btn-xs btn-light" data-toggle="popover" data-trigger="hover" data-placement="top" data-content="Cancelar a conta"><i class="ace-icon fa fa-ban bigger-150 red"></i></span>
			<span id="btnImpID" class="btn btn-app btn-xs btn-light" data-toggle="popover" data-trigger="hover" data-placement="top" data-content="Gerar o PDF para impressão"><i class="ace-icon fa fa-print bigger-150"></i></span>
		</div>
	</div><!-- /.page-header -->

	<div id="user-profile-3" class="user-profile row">
		<form id="zgFormID" class="form-horizontal">
		<input type="hidden" name="id" value="%ID%">
		<input type="hidden" name="_edit" value="1">
		<input type="hidden" id="codContaID" name="codConta" value="%COD_CONTA%">
		<input type="hidden" id="codStatusID" name="codStatus" value="%COD_STATUS%">
		<input type="hidden" id="codParcelaID" name="parcela" value="%PARCELA%">
		<input type="hidden" id="indValorParcelaID" name="indValorParcela" value="1">
		<input type="hidden" id="codTipoValorID" name="codTipoValor" value="P">
		<input type="hidden" id="codTipoRecID" name="codTipoRec" value="%COD_TIPO_REC%">
		<input type="hidden" id="valorTotalID" name="valorTotal">
		<input type="hidden" id="aDataID" name="aData[]">
		<input type="hidden" id="aValorID" name="aValor[]">
		<input type="hidden" id="indSomenteVisID" name="indSomenteVis" value="%IND_SOMENTE_VIS%">
		
		
		<div class="col-sm-9">
			<div class="tabbable">
				<ul class="nav nav-tabs padding-12 background-blue">
					<li>
						<a data-toggle="tab" href="#contaPagar-recorrencia"><i class="green fa fa-refresh bigger-125"></i>Recorrência</a>
					</li>
					<li class="active">
						<a data-toggle="tab" href="#contaPagar-principal"><i class="blue fa fa-edit bigger-125"></i>Identificação</a>
					</li>
					<li>
						<a data-toggle="tab" href="#contaPagar-valores"><i class="purple fa fa-usd bigger-125"></i>Valores</a>
					</li>
					<li>
						<a data-toggle="tab" href="#contaPagar-configuracoes"><i class="grey fa fa-cog bigger-125"></i>Configurações</a>
					</li>
					<li>
						<a data-toggle="tab" href="#contaPagar-rateio"><i class="grey fa fa-calculator bigger-125"></i>Rateio</a>
					</li>
				</ul>

				<div class="tab-content profile-edit-tab-content">
					<div id="contaPagar-recorrencia" class="tab-pane in">
						<div class="row ">
							<div class="form-group col-sm-12" id="divRecorrenciaID">
								<label class="col-sm-3 control-label">Recorrência</label>
								<div class="btn-group btn-corner col-sm-8 pull-left">
									<span id='codTipoRecUID' style="width: 180px;" class="btn btn-sm">Única</span>
									<span tabindex="99001" class="btn btn-sm btn-info"><i class="ace-icon fa fa-question-circle" data-rel="popover" data-placement="top" data-trigger="hover" data-original-title="<i class='ace-icon fa fa-question-circle red'></i> Ajuda" data-content="Informe se a conta será única ou parcelada"></i></span>
									<span id='codTipoRecPID' style="width: 180px;" class="btn btn-sm">Parcelada</span>
								</div>
							</div>
						</div>
						<div class="row " id="divRecParcelaID">
					    	<div class="form-group col-sm-12" id="divNumParcelasID">
								<label class="col-sm-3 control-label">Num. de Parcelas</label>
				    			<div class="input-group col-sm-2">
				    				<div class="input-group col-sm-10 pull-left">
					    				<span tabindex="99001" class="input-group-addon"><i class="ace-icon fa fa-question-circle" data-rel="popover" data-placement="top" data-trigger="hover" data-original-title="<i class='ace-icon fa fa-question-circle red'></i> Ajuda" data-content="Número de parcelas"></i></span>
							    		<input class="form-control" readonly id="numParcelasID" value="%NUM_PARCELAS%" type="text" name="numParcelas"  maxlength="2" autocomplete="off" zg-data-toggle="mask" zg-data-mask="numero">
							    	</div>
							    </div>
					    	</div>
					    	<div class="form-group col-sm-12" id="divParcelaInicialID">
								<label class="col-sm-3 control-label">Parcela Inicial</label>
				    			<div class="input-group col-sm-2">
				    				<div class="input-group col-sm-10 pull-left">
					    				<span tabindex="99002" class="input-group-addon"><i class="ace-icon fa fa-question-circle" data-rel="popover" data-placement="top" data-trigger="hover" data-original-title="<i class='ace-icon fa fa-question-circle red'></i> Ajuda" data-content="Parcela inicial que será considerada (o número total de parcelas será: NUM_PARCELAS - PARCELA_INICIAL)"></i></span>
							    		<input class="form-control" readonly id="parcelaInicialID" value="%PARCELA_INICIAL%" type="text" name="parcelaInicial"  maxlength="2" autocomplete="off" zg-data-toggle="mask" zg-data-mask="numero">
							    	</div>
							    </div>
					    	</div>
							<div class="form-group col-sm-12" id="divPeriodoRecID">
								<label class="col-sm-3 control-label">Repete-se a cada</label>
				    			<div class="input-group col-sm-2 pull-left">
				    				<div class="input-group col-sm-10 pull-left">
					    				<span tabindex="99003" class="input-group-addon"><i class="ace-icon fa fa-question-circle" data-rel="popover" data-placement="top" data-trigger="hover" data-original-title="<i class='ace-icon fa fa-question-circle red'></i> Ajuda" data-content="Intervalo de repetição"></i></span>
					    				<input class="form-control" readonly  id="intervaloRecID" type="text" name="intervaloRec" maxlength="2" value="%INTERVALO_REC%" autocomplete="off" zg-data-toggle="mask" zg-data-mask="numero">
					    			</div>
					    		</div>
					    		<div class="input-group col-sm-3 pull-left">
					    			<div class="input-group col-sm-10 pull-left">
					    				<span tabindex="99004" class="input-group-addon"><i class="ace-icon fa fa-question-circle" data-rel="popover" data-placement="top" data-trigger="hover" data-original-title="<i class='ace-icon fa fa-question-circle red'></i> Ajuda" data-content="Período de Recorrência da Conta"></i></span>
										<select class="select2 readonly" style="width:100%;" id="codPeriodoRecID" name="codPeriodoRec" data-rel="select2">
										%PERIODOS_REC%
										</select>
									</div>
							    </div>
					    	</div>
						</div>
					</div>
					<div id="contaPagar-principal" class="tab-pane in active">
						<div class="row">
							<div class="form-group col-sm-12" id="divNumeroID">
								<label class="col-sm-3 control-label">Número</label>
				    			<div class="input-group col-sm-4 pull-left">
				    				<span tabindex="99001" class="input-group-addon"><i class="ace-icon fa fa-question-circle" data-rel="popover" data-placement="top" data-trigger="hover" data-original-title="<i class='ace-icon fa fa-question-circle red'></i> Ajuda" data-content="Número identificador da Conta"></i></span>
					    			<input class="form-control" id="numeroID" type="text" name="numero" maxlength="20" value="%NUMERO%" READONLY autocomplete="off">
							    </div>
								<div class="help-block col-sm-5 inline" id="divHelpNumeroID"></div>
					    	</div>
						</div>
					    
						<div class="row">
							<div class="form-group col-sm-12" id="divDescricaoID">
								<label class="col-sm-3 control-label">Descrição</label>
				    			<div class="input-group col-sm-4 pull-left">
				    				<span tabindex="99002" class="input-group-addon"><i class="ace-icon fa fa-question-circle" data-rel="popover" data-placement="top" data-trigger="hover" data-original-title="<i class='ace-icon fa fa-question-circle red'></i> Ajuda" data-content="Descrição da Conta a Pagar"></i></span>
					    			<input onchange="validaIdentificacaoCPAlt()" class="form-control" id="descricaoID" type="text" name="descricao" maxlength="60" value="%DESCRICAO%" autocomplete="off" %TEXT_VIEW%>
							    </div>
								<div class="help-block col-sm-5 inline" id="divHelpDescricaoID"></div>
					    	</div>
						</div>
						<div class="row">
							<div class="form-group col-sm-12" id="divDataVencID">
								<label class="col-sm-3 control-label">Data de Vencimento</label>
				    			<div class="input-group col-sm-4 pull-left">
				    				<span tabindex="99003" class="input-group-addon"><i class="ace-icon fa fa-question-circle" data-rel="popover" data-placement="top" data-trigger="hover" data-original-title="<i class='ace-icon fa fa-question-circle red'></i> Ajuda" data-content="Data de vencimento da conta"></i></span>
					    			<input onchange="validaIdentificacaoCPAlt()" class="form-control datepicker" id="dataVencID" type="text" name="dataVenc" maxlength="10" value="%DATA_VENC%" autocomplete="off" zg-data-toggle="mask" zg-data-mask="data" %TEXT_VIEW%>
							    </div>
								<div class="help-block col-sm-5 inline" id="divHelpDataVencID"></div>
					    	</div>
						</div>
						<div class="row">
							<div class="form-group col-sm-12" id="divParcelaID">
								<label class="col-sm-3 control-label">Parcela</label>
				    			<div class="input-group col-sm-4 pull-left">
				    				<span tabindex="99004" class="input-group-addon"><i class="ace-icon fa fa-question-circle" data-rel="popover" data-placement="top" data-trigger="hover" data-original-title="<i class='ace-icon fa fa-question-circle red'></i> Ajuda" data-content="Número da Parcela"></i></span>
					    			<input readonly class="form-control" type="text"  maxlength="4" value="(%PARCELA%/%NUM_PARCELAS%)" autocomplete="off">
							    </div>
								<div class="help-block col-sm-5 inline" id="divHelpDataVencID"></div>
					    	</div>
						</div>
						
					</div>
					<div id="contaPagar-valores" class="tab-pane in">
						<div class="row">
							<div class="form-group col-sm-12" id="divValorID">
								<label class="col-sm-3 control-label">Valor</label>
				    			<div class="input-group col-sm-4 pull-left">
				    				<span tabindex="99007" class="input-group-addon"><i class="ace-icon fa fa-question-circle" data-rel="popover" data-placement="top" data-trigger="hover" data-original-title="<i class='ace-icon fa fa-question-circle red'></i> Ajuda" data-content="Valor da conta"></i></span>
					    			<input onchange="atualizaInfoValorCPAlt()" class="form-control" id="valorID" type="text" name="valor" maxlength="20" value="%VALOR%" autocomplete="off" required zg-data-toggle="mask" zg-data-mask="dinheiro" zg-data-mask-retira="0" %TEXT_VIEW%>
							    </div>
								<div class="help-block col-sm-5 inline" id="divHelpValorID"></div>
					    	</div>
						</div>
						
						<div class="row">
							<div class="form-group col-sm-12" id="divJurosID">
								<label class="col-sm-3 control-label">Júros</label>
				    			<div class="input-group col-sm-4 pull-left">
				    				<span tabindex="99008" class="input-group-addon"><i class="ace-icon fa fa-question-circle" data-rel="popover" data-placement="top" data-trigger="hover" data-original-title="<i class='ace-icon fa fa-question-circle red'></i> Ajuda" data-content="Valor do Júros"></i></span>
					    			<input onchange="atualizaInfoValorCPAlt()" class="form-control" id="valorJurosID" type="text" name="valorJuros" maxlength="20" value="%VALOR_JUROS%" autocomplete="off" zg-data-toggle="mask" zg-data-mask="dinheiro" zg-data-mask-retira="0" %TEXT_VIEW%>
							    </div>
								<div class="help-block col-sm-5 inline" id="divHelpJurosID"></div>
					    	</div>
						</div>
						<div class="row">
							<div class="form-group col-sm-12" id="divMoraID">
								<label class="col-sm-3 control-label">Mora</label>
				    			<div class="input-group col-sm-4 pull-left">
				    				<span tabindex="99009" class="input-group-addon"><i class="ace-icon fa fa-question-circle" data-rel="popover" data-placement="top" data-trigger="hover" data-original-title="<i class='ace-icon fa fa-question-circle red'></i> Ajuda" data-content="Mora cobrada"></i></span>
					    			<input onchange="atualizaInfoValorCPAlt()" class="form-control" id="valorMoraID" type="text" name="valorMora" maxlength="20" value="%VALOR_MORA%" autocomplete="off" zg-data-toggle="mask" zg-data-mask="dinheiro" zg-data-mask-retira="0" %TEXT_VIEW%>
							    </div>
								<div class="help-block col-sm-5 inline" id="divHelpMoraID"></div>
					    	</div>
						</div>
						<div class="row">
							<div class="form-group col-sm-12" id="divDescontoID">
								<label class="col-sm-3 control-label">Desconto</label>
				    			<div class="input-group col-sm-4 pull-left">
				    				<span tabindex="99010" class="input-group-addon"><i class="ace-icon fa fa-question-circle" data-rel="popover" data-placement="top" data-trigger="hover" data-original-title="<i class='ace-icon fa fa-question-circle red'></i> Ajuda" data-content="Desconto total"></i></span>
					    			<input onchange="atualizaInfoValorCPAlt()" class="form-control" id="valorDescontoID" type="text" name="valorDesconto" maxlength="20" value="%VALOR_DESCONTO%" autocomplete="off" zg-data-toggle="mask" zg-data-mask="dinheiro" zg-data-mask-retira="0" %TEXT_VIEW%>
							    </div>
								<div class="help-block col-sm-5 inline" id="divHelpDescontoID"></div>
					    	</div>
						</div>
						<div class="row">
							<div class="form-group col-sm-12" id="divOutrosID">
								<label class="col-sm-3 control-label">Outros</label>
				    			<div class="input-group col-sm-4 pull-left">
				    				<span tabindex="99010" class="input-group-addon"><i class="ace-icon fa fa-question-circle" data-rel="popover" data-placement="top" data-trigger="hover" data-original-title="<i class='ace-icon fa fa-question-circle red'></i> Ajuda" data-content="Outros Valores"></i></span>
					    			<input onchange="atualizaInfoValorCPAlt()" class="form-control" id="valorOutrosID" type="text" name="valorOutros" maxlength="20" value="%VALOR_OUTROS%" autocomplete="off" zg-data-toggle="mask" zg-data-mask="dinheiro" zg-data-mask-retira="0" %TEXT_VIEW%>
							    </div>
								<div class="help-block col-sm-5 inline" id="divHelpOutrosID"></div>
					    	</div>
						</div>
						<div class="row">
							<div class="form-group col-sm-12" id="divValorCanceladoID">
								<label class="col-sm-3 control-label">Cancelado</label>
				    			<div class="input-group col-sm-4 pull-left">
				    				<span tabindex="99010" class="input-group-addon"><i class="ace-icon fa fa-question-circle" data-rel="popover" data-placement="top" data-trigger="hover" data-original-title="<i class='ace-icon fa fa-question-circle red'></i> Ajuda" data-content="Desconto total"></i></span>
					    			<input onchange="atualizaInfoValorCPAlt()" class="form-control" id="valorCanceladoID" type="text" name="valorCancelado" maxlength="20" value="%VALOR_CANCELADO%" autocomplete="off" zg-data-toggle="mask" zg-data-mask="dinheiro" zg-data-mask-retira="0" %TEXT_VIEW%>
							    </div>
								<div class="help-block col-sm-5 inline" id="divHelpValorCanceladoID"></div>
					    	</div>
						</div>
					</div>
					<div id="contaPagar-configuracoes" class="tab-pane in">
						<div class="row">
							<div class="form-group col-sm-12" id="divFormaPagID">
								<label class="col-sm-3 control-label">Forma de Pag.</label>
				    			<div class="input-group col-sm-4 pull-left">
				    				<span tabindex="99011" class="input-group-addon"><i class="ace-icon fa fa-question-circle" data-rel="popover" data-placement="top" data-trigger="hover" data-original-title="<i class='ace-icon fa fa-question-circle red'></i> Ajuda" data-content="Selecione a Forma de Pagamento da Conta"></i></span>
									<select class="select2 %SELECT_VIEW%" style="width:100%;" id="codFormaPagID" name="codFormaPag" data-rel="select2" onchange="atualizaInfoFormaPagCPAlt();">
									%FORMAS_PAG%
									</select>
							    </div>
							    <div class="help-block col-sm-5 inline" id="divHelpFormaPagID"></div>
					    	</div>
						</div>
						<div class="row">
							<div class="form-group col-sm-12" id="divContaPagID">
								<label class="col-sm-3 control-label">Conta de Pagamento</label>
				    			<div class="input-group col-sm-4 pull-left">
				    				<span tabindex="99012" class="input-group-addon"><i class="ace-icon fa fa-question-circle" data-rel="popover" data-placement="top" data-trigger="hover" data-original-title="<i class='ace-icon fa fa-question-circle red'></i> Ajuda" data-content="Conta de Pagamento (Conta que será debitado o valor)"></i></span>
									<select class="select2 %SELECT_VIEW%" style="width:100%;" id="codContaPagID" name="codContaPag" data-rel="select2" onchange="atualizaInfoContaPagCPAlt();">
									%CONTAS%
									</select>
							    </div>
							    <div class="help-block col-sm-5 inline" id="divHelpContaPagID"></div>
					    	</div>
						</div>
						<div class="row">
							<div class="form-group col-sm-12" id="divFlagAlterarSeqID">
			    				<label class="col-sm-3 control-label">
			    					<input name="flagAlterarSeq" id="flagAlterarSeqID" class="ace ace-switch"  type="checkbox" %BUTTON_VIEW%/>
			    					<span class="lbl" data-lbl="SIM&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;NÃO">&nbsp;&nbsp;</span>
			    				</label>
							
				    			<div class="input-group col-sm-4 pull-left">
				    				<span tabindex="99005" class="input-group-addon"><i class="ace-icon fa fa-question-circle" data-rel="popover" data-placement="top" data-trigger="hover" data-original-title="<i class='ace-icon fa fa-question-circle red'></i> Ajuda" data-content="Marque SIM para que as contas parceladas que fazem parte dessa mesma conta também sejam alteradas (somente as próximas da sequência) "></i></span>
				    				<input readonly type="text" class="form-control" placeholder="Alterar as contas na sequência ?" aria-describedby="sizing-addon2">
							    </div>
							    <div class="help-block col-sm-5 inline" id="divHelpFlagAlterarSeqID"></div>
					    	</div>
					    </div>
						<div class="row" id="divFlagPagarAutoID">
							<div class="form-group col-sm-12" >
			    				<label class="col-sm-3 control-label">
			    					<input name="flagPagarAuto" id="flagPagarAutoID" class="ace ace-switch" %FLAG_PAGAR_AUTO% type="checkbox" %BUTTON_VIEW%/>
			    					<span class="lbl" data-lbl="SIM&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;NÃO">&nbsp;&nbsp;</span>
			    				</label>
							
				    			<div class="input-group col-sm-4 pull-left">
				    				<span tabindex="99014" class="input-group-addon"><i class="ace-icon fa fa-question-circle" data-rel="popover" data-placement="top" data-trigger="hover" data-original-title="<i class='ace-icon fa fa-question-circle red'></i> Ajuda" data-content="Marque SIM para que o sistema faça a baixa automática da conta na data de vencimento dela"></i></span>
				    				<input readonly type="text" class="form-control" placeholder="Confirmar automaticamente na data de vencimento ?" aria-describedby="sizing-addon2">
							    </div>
							    <div class="help-block col-sm-5 inline" id="divHelpFlagPagaID"></div>
					    	</div>
						</div>
						<div class="row">
							<div class="form-group col-sm-12" id="divCodPessoaID">
								<label class="col-sm-3 control-label">Pessoa (Fornecedor)</label>
				    			<div class="input-group col-sm-4 pull-left">
				    				<span tabindex="99017" class="input-group-addon"><i class="ace-icon fa fa-question-circle" data-rel="popover" data-placement="top" data-trigger="hover" data-original-title="<i class='ace-icon fa fa-question-circle red'></i> Ajuda" data-content="Pessoa que irá receber o pagamento"></i></span>
				    				<input type="hidden" id="codPessoaID" name="codPessoa" value="%COD_PESSOA%" class="width-100" placeholder="digite o nome ou o cpf/cnpj" data-rel="select2Pessoa" />
							    </div>
							    <div class="help-block col-sm-5 inline" id="divHelpCodPessoaID"></div>
					    	</div>
						</div>
						<div class="row">
							<div class="form-group col-sm-12" id="divDocumentoID">
								<label class="col-sm-3 control-label">Documento</label>
				    			<div class="input-group col-sm-4 pull-left">
				    				<span tabindex="99018" class="input-group-addon"><i class="ace-icon fa fa-question-circle" data-rel="popover" data-placement="top" data-trigger="hover" data-original-title="<i class='ace-icon fa fa-question-circle red'></i> Ajuda" data-content="Documento (Você pode especificar algum documento relativo a conta)"></i></span>
				    				<input class="form-control" id="documentoID" type="text" name="documento" maxlength="20" value="%DOCUMENTO%" autocomplete="off" %TEXT_VIEW%>
							    </div>
							    <div class="help-block col-sm-5 inline" id="divHelpDocumentoID"></div>
					    	</div>
						</div>
						<div class="row">
							<div class="form-group col-sm-12" id="divObsID">
								<label class="col-sm-3 control-label">Observações</label>
				    			<div class="input-group col-sm-4 pull-left">
				    				<span tabindex="99018" class="input-group-addon"><i class="ace-icon fa fa-question-circle" data-rel="popover" data-placement="top" data-trigger="hover" data-original-title="<i class='ace-icon fa fa-question-circle red'></i> Ajuda" data-content="Observações adicionais"></i></span>
				    				<textarea class="form-control limited" id="obsID" maxlength="400" name="obs" autocomplete="off" %TEXT_VIEW%>%OBS%</textarea>
							    </div>
							    <div class="help-block col-sm-5 inline" id="divHelpObsID"></div>
					    	</div>
						</div>
					</div>
					<div id="contaPagar-rateio" class="tab-pane in">
						<div>
							<table id="CPAltTableRateioID" class="table table-condensed table-hover table-bordered bootstrap-datatable datatable display ">
								<thead>
									<tr class="warning">
										<th class="col-sm-3 center">Categoria</th>
										<th class="col-sm-3 center">Centro de Custo</th>
										<th class="col-sm-2 center">Valor</th>
										<th class="col-sm-2 center">Percentual</th>
										<th class="col-sm-1 center"><span class="%ESCONDIDO%" %BUTTON_VIEW% onclick="addRowRateioCPAlt(0,0);"><i class="fa fa-plus-circle blue bigger-150"></i></span></th>
									</tr>
								</thead>
								<tbody>
								%RATEIOS%
								</tbody>
								<tfoot>
									<tr>
										<th colspan="2" style="text-align: right;">Total</th>
										<th id="tableTotalCellID" class="center"></th>
										<th id="tablePctCellID" class="center"></th>
										<th></th>
									</tr>
								</tfoot>
							</table>
						</div>
					</div>
				</div>
			</div>
			<div class="clearfix form-actions">
				<label class="col-sm-5 control-label" >&nbsp;</label>
   				<button type="button" class="btn btn-primary" id="btnSubmitID" %BUTTON_VIEW%><i class="fa fa-check bigger-110"></i> Salvar</button>
			</div>
			
		</div>
		
		<div class="col-sm-3 pull-right">
			<div class="widget-box">
				<div class="widget-header widget-header-flat widget-header-small center">
					<h5 class="widget-title">Resumo</h5>
				</div>
				<div class="widget-body">
					<div class="widget-main small">
						
						<div class="row hidden" id="divInfoTipoContaID">
							<div class="col-sm-12">
						    	<p class="col-sm-4 pull-left align-right text-info inline" style="padding: 2px; margin:0;">Tipo:</p>
						    	<p id='lbInfoTipoContaID' class="col-sm-8 pull-right align-left" style="padding: 2px; margin:0;"></p>
					    	</div>
						</div>
						<div class="row hidden" id="divInfoRecorrenciaID">
							<div class="col-sm-12">
						    	<p class="col-sm-4 pull-left align-right text-info inline" style="padding: 2px; margin:0;">Período:</p>
						    	<p id='lbInfoRecorrenciaID' class="col-sm-8 pull-right align-left" style="padding: 2px; margin:0;"></p>
					    	</div>
						</div>
						<div class="row hidden" id="divInfoNumParcelasID">
							<div class="col-sm-12">
						    	<p class="col-sm-4 pull-left align-right text-info inline" style="padding: 2px; margin:0;">Parcela:</p>
						    	<p id='lbInfoNumParcelasID' class="col-sm-8 pull-right align-left" style="padding: 2px; margin:0;"></p>
					    	</div>
						</div>
						<div class="row hidden" id="divInfoIdentID">
							<h6 class="header blue bolder smaller">&nbsp;Identificação</h6>
							<div class="vspace-xs"></div>
							<div class="col-sm-12">
						    	<p class="col-sm-4 pull-left align-right text-info inline" style="padding: 2px; margin:0;">Identificação:</p>
						    	<p id='lbInfoIdentID' class="col-sm-8 pull-right align-left" style="padding: 2px; margin:0;"></p>
					    	</div>
						</div>
						<div class="row hidden" id="divInfoDataVencID">
							<div class="col-sm-12">
						    	<p class="col-sm-4 pull-left align-right text-info inline" style="padding: 2px; margin:0;">Vencimento:</p>
						    	<p id='lbInfoDataVencID' class="col-sm-8 pull-right align-left" style="padding: 2px; margin:0;"></p>
					    	</div>
						</div>
	
						<div class="row hidden" id="divInfoValorID">
							<h6 class="header blue bolder smaller">&nbsp;Valores</h6>
							<div class="vspace-xs"></div>
							<div class="col-sm-12">
						    	<p class="col-sm-4 pull-left align-right text-info inline" style="padding: 2px; margin:0;">Valor Total:</p>
						    	<p id='lbInfoValorID' class="col-sm-8 pull-right align-left" style="padding: 2px; margin:0;"></p>
					    	</div>
						</div>
						<div class="row hidden" id="divInfoConfID">
							<h6 class="header blue bolder smaller">&nbsp;Configurações</h6>
							<div class="vspace-xs"></div>
						</div>
						<div class="row hidden" id="divInfoFormaPagID">
							<div class="col-sm-12">
						    	<p class="col-sm-4 pull-left align-right text-info inline" style="padding: 2px; margin:0;">Forma Pag:</p>
						    	<p id='lbInfoFormaPagID' class="col-sm-8 pull-right align-left" style="padding: 2px; margin:0;"></p>
					    	</div>
						</div>
						<div class="row hidden" id="divInfoContaPagID">
							<div class="col-sm-12">
						    	<p class="col-sm-4 pull-left align-right text-info inline" style="padding: 2px; margin:0;">Conta</p>
						    	<p id='lbInfoContaPagID' class="col-sm-8 pull-right align-left" style="padding: 2px; margin:0;"></p>
					    	</div>
						</div>
						<div class="row hidden" id="divInfoSaldoContaID">
							<div class="col-sm-12">
						    	<p class="col-sm-4 pull-left align-right text-info inline" style="padding: 2px; margin:0;">Saldo da Conta:</p>
						    	<p id='lbInfoSaldoContaID' class="col-sm-8 pull-right align-left" style="padding: 2px; margin:0;"></p>
					    	</div>
						</div>
						<div class="row hidden" id="divInfoCategoriaID">
							<div class="col-sm-12">
						    	<p class="col-sm-4 pull-left align-right text-info inline" style="padding: 2px; margin:0;">Categoria:</p>
						    	<p id='lbInfoCategoriaID' class="col-sm-8 pull-right align-left" style="padding: 2px; margin:0;"></p>
					    	</div>
						</div>
						<div class="row hidden" id="divInfoCentroCustoID">
							<div class="col-sm-12">
						    	<p class="col-sm-4 pull-left align-right text-info inline" style="padding: 2px; margin:0;">C. Custo:</p>
						    	<p id='lbInfoCentroCustoID' class="col-sm-8 pull-right align-left" style="padding: 2px; margin:0;"></p>
					    	</div>
						</div>
						<div class="row hidden" id="divInfoPessoaID">
							<div class="col-sm-12">
						    	<p class="col-sm-4 pull-left align-right text-info inline" style="padding: 2px; margin:0;">Fornecedor:</p>
						    	<p id='lbInfoPessoaID' class="col-sm-8 pull-right align-left" style="padding: 2px; margin:0;"></p>
					    	</div>
						</div>
						
						<div class="row" id="divInfoCancID">
							<h6 class="header blue bolder smaller">&nbsp;Cancelamento</h6>
							<div class="vspace-xs"></div>
							<div class="col-sm-12">
						    	<p class="col-sm-4 pull-left align-right text-info inline" style="padding: 2px; margin:0;">Data Canc:</p>
						    	<p id='lbDataCancID' class="col-sm-8 pull-right align-left" style="padding: 2px; margin:0;">%DATA_CANC%</p>
					    	</div>
							<div class="col-sm-12">
						    	<p class="col-sm-4 pull-left align-right text-info inline" style="padding: 2px; margin:0;">Valor Canc.:</p>
						    	<p id='lbvalorCancID' class="col-sm-8 pull-right align-left" style="padding: 2px; margin:0;">%VALOR_CANC%</p>
					    	</div>
							<div class="col-sm-12">
						    	<p class="col-sm-4 pull-left align-right text-info inline" style="padding: 2px; margin:0;">Motivo:</p>
						    	<p id='lbmotivoID' class="col-sm-8 pull-right align-left" style="padding: 2px; margin:0;">%MOTIVO_CANC%</p>
					    	</div>
							<div class="col-sm-12">
						    	<p class="col-sm-4 pull-left align-right text-info inline" style="padding: 2px; margin:0;">Usuário:</p>
						    	<p id='lbuserCancID' class="col-sm-8 pull-right align-left" style="padding: 2px; margin:0;">%USER_CANC%</p>
					    	</div>
						</div>
					</div>
				</div>
			</div>
		</div>
		
		
		<div class="col-sm-4">
		</div>
		</form>
	</div>
</div>
<div id="divMsgContaID"></div>


<script type="text/javascript" charset="%CHARSET%">

$( "#zgDivModalDialogID" ).css( "width", function( index ) {
	return "74%";
});

$('#btnSubmitID').on("click", function(e) {
	var vOk 	= atualizaEValidaTotalTabelaRateioCPAlt();
	if(!vOk) 	{
		$.gritter.add({
			title: 'Valores de Rateio inconsistentes',
			text: 'Ajuste os valores de rateio !!!!',
			class_name: 'gritter-info gritter-center gritter-error'
		});
		e.preventDefault();
		return false;
	}else{
		
		var $valTotal	= parseFloat(getValorParcelaCPAlt().replace(".", "").replace(",","."));
		$('#valorTotalID').val($valTotal);
		$('#aDataID').eq(0).val($('#dataVencID').val());
		$('#aValorID').eq(0).val($('#valorID').val());
		$('#zgFormID').submit();
	}


});

$(".nav-tabs a[data-toggle=tab]").on("click", function(e) {
	if ($(this).hasClass("disabled")) {
		e.preventDefault();
		return false;
	}
});

$('[data-rel=tooltip]').tooltip();
$('[data-rel=popover]').popover({html:true});
$('[data-rel="select2"]').select2();
$('.datepicker').datepicker({"autoclose": true});

/** Desabilitar os selects para a tela de View **/
$('[data-rel="select2"]').each(function( index ) {
	if ($(this).hasClass('readonly')) {
		$(this).select2("readonly", true);
	}else{
		$(this).select2();
	}
});


$('textarea[class*=autosize]').autosize({append: "\n"});
$('textarea.limited').inputlimiter({
	remText: '%n caracteres restando...',
	limitText: 'Máximo Permitido : %n.'
});


$('[zg-data-toggle="mask"]').each(function( index ) {
	zgMask($( this ), $( this ).attr('zg-data-mask'));
});

$('#zgFormID').submit(function() {
	
	$('#btnSubmitID').html('Aguarde...  <i class="ace-icon fa fa-spinner fa-spin orange bigger-125"></i>');
	$('#btnSubmitID').attr("disabled","disabled");

	/** Retirar a máscara para os campos que estão configurados para tal **/
	$('[zg-data-mask-retira="1"]').each(function( index ) {
		$( this ).val($( this ).cleanVal());
	});

	/** Habilitar os SELECTS que estão desabilitados para poder enviar o valor **/
	$( "select" ).each(function( index ) {
		if ($(this).hasClass('readonly')) {
			$(this).prop( "disabled", false );
		}
	});
	
	$.ajax({
		type:	"POST", 
		url:	"%DP%",
		data:	$('#zgFormID').serialize(),
	}).done(function( data, textStatus, jqXHR) {

		/** Recolocar a máscara para os campos que estão configurados para tal **/
		$('[zg-data-mask-retira="1"]').each(function( index ) {
			zgMask($( this ), $( this ).attr('zg-data-mask'));
			$( this ).trigger('keyup');
		});
		
		if (checaRetornoOK(data) == true) {
			$('#codContaID').val(zgGetCodRetorno(data));
			$('#numeroID').val(zgGetCodRetorno(data,2));
			$('#codStatusID').val(zgGetCodRetorno(data,3));
			$('#lbInfoStatusID').text(zgGetCodRetorno(data,4));
			calculaAcoesBotoesCPAlt();
			mostraInfoCancCPAlt();
		}

		zgMostraAviso("Fechar");
		
		//Voltar o botão de salvar
		$('#btnSubmitID').html('<i class="fa fa-check bigger-110"></i> Salvar ');
		$('#btnSubmitID').attr("disabled",false);
		
	}).fail(function( jqXHR, textStatus, errorThrown) {
		zgMostraAviso(jqXHR);
	});
	
	$( "select" ).each(function( index ) {
		if ($(this).hasClass('readonly')) {
			$(this).prop( "disabled", true );
		}
	});

	return false; 
});

/*********************************************************
* Busca Select2 typehead Pessoa
*********************************************************/
$('[data-rel="select2Pessoa"]').select2({
    minimumInputLength: 2,
    placeholder: 'Buscar Pessoa',
    allowClear: true,
    ajax: { // instead of writing the function to execute the request we use Select2's convenient helper
        url: "%ROOT_URL%/Fin/fornecedorLis.dp.php",
        dataType: 'json',
        quietMillis: 250,
        data: function (term, page) {
            return {
                q: term, // search term
            };
        },
        results: function (data) {
			return {results: data};
		},
        cache: true
    },
	initSelection : function (element, callback) {
		var id = $(element).val();
        if (id !== "") {
            $.ajax("%ROOT_URL%/Fin/fornecedorLis.dp.php", {
                data: {codPessoa: id},
    			method: "GET",
                dataType: "json"
			}).done(function(data) {
				callback(data[0]);
			});
		}
    },
});


function delRowRateioCPAlt(pObj) {
	var $td		= pObj.parent();
	var $tr		= $td.parent();
	$tr.addClass("danger");
	$tr.fadeOut(500, function(){
		$tr.remove();
		atualizaEValidaTotalTabelaRateioCPAlt();
	});
	
}

function addRowRateioCPAlt(pValor,pPct) {
	var $valor,$indTriggerChange;
	
	/** Se o valor for zero, calcular o valor restante **/
	if (pValor == 0) {
		var $total		= getValorParcelaCPAlt().replace(".", "").replace(",",".");
		var $tValor 	= parseFloat(0);
		
		$('#CPAltTableRateioID > tbody > tr [name*="valorRateio[]"]').each(function( index ) {
			$tValor += parseFloat($(this).val().replace(".", "").replace(",","."));
		});
		
		var opt1 = {
			symbol : "",
			decimal : ",",
			thousand: ".",
			precision : 2,
			format: "%s%v"
		};
		
		$tValor				= parseFloat($tValor.toFixed(2));
		$valor				= parseFloat(($total - $tValor).toFixed(2));
		$valor				= accounting.formatMoney($valor, opt1);
		
		$indTriggerChange	= 1;
	}else{
		$valor				= pValor;
		$indTriggerChange	= 0;
	}
	
	$('#CPAltTableRateioID > tbody:last').append('<tr><td><select class="select2" style="width:100%;" name="codCategoria[]" data-rel="select2">%CATEGORIAS%</select></td><td><select class="select2" style="width:100%;" name="codCentroCusto[]" data-rel="select2">%CENTROS_CUSTO%</select></td><td><input type="text" name="valorRateio[]" onchange="calculaPctCellRateioCPAlt($(this));" value="'+$valor+'" maxlength="20" autocomplete="off" zg-data-toggle="mask" zg-data-mask="dinheiro" zg-data-mask-retira="0"></td><td><input type="text" name="pctRateio[]" value="'+pPct+'" onchange="calculaValorCellRateioCPAlt($(this));" maxlength="7" autocomplete="off" zg-data-toggle="mask" zg-data-mask="porcentagem" zg-data-mask-retira="0"></td><td class="center"><span class="center" zgdelete onclick="delRowRateioCPAlt($(this));"><i class="fa fa-trash bigger-150 red"></i></span><input type="hidden" name="codRateio[]"></td></tr>');
	$('#CPAltTableRateioID > tbody > tr:last [zg-data-toggle="mask"]').each(function( index ) {
		zgMask($( this ), $( this ).attr('zg-data-mask'));
		$( this ).trigger('keyup');
	});
	$('#CPAltTableRateioID > tbody > tr:last .select2').select2("destroy").select2({allowClear: true});

	/** Atualizar o Percentual **/
	if ($indTriggerChange	== 1) {
		$('#CPAltTableRateioID > tbody > tr:last [name*="valorRateio[]"]').each(function( index ) {
			$( this ).trigger('change');
			$( this ).trigger('keyup');
		});
	}
	
	
	atualizaEValidaTotalTabelaRateioCPAlt();
}

function atualizaEValidaTotalTabelaRateioCPAlt() {
	var $tValor 	= parseFloat(0);
	var $tPct 		= parseFloat(0);
	var $total		= getValorParcelaCPAlt().replace(".", "").replace(",",".");
	var $cem		= (100+0).toFixed(2);
	var $htmlOK,$htmlError,$htmlValor,$htmlPct,$vOK;
	var $epsilon	= 0.00000001;
	
	$vOK			= true;

	$('#CPAltTableRateioID > tbody > tr [name*="valorRateio[]"]').each(function( index ) {
		$tValor += parseFloat($(this).val().replace(".", "").replace(",","."));
	});
	
	$('#CPAltTableRateioID > tbody > tr [name*="pctRateio[]"]').each(function( index ) {
		$tPct += parseFloat($(this).val().replace(".", "").replace(",","."));
	});

	$tValor		= parseFloat($tValor.toFixed(2));
	$tPct		= parseFloat($tPct.toFixed(2));
	
	var opt = {
		symbol : "",
		decimal : ",",
		thousand: ".",
		precision : 2,
		format: "%s%v"
	};

	var opt1 = {
		symbol : "R$ ",
		decimal : ",",
		thousand: ".",
		precision : 2,
		format: "%s%v"
	};
	
	var opt2 = {
		symbol : "",
		decimal : ",",
		thousand: ".",
		precision : 2,
		format: "%s%v"
	};

	$htmlOK 		= "&nbsp;<span><i class='fa fa-check-circle green bigger-140'></i></span>";
	$htmlError		= "&nbsp;<span><i class='fa fa-exclamation-circle red bigger-140'></i></span>";
	
	if ($tValor == $total) {
		$htmlValor 	= $htmlOK;
	}else{
		
		var $textoValor;
		var	$diffValor	= ($total - $tValor);
		
		if ($diffValor > 0) {
			$textoValor	= "Falta ratear ainda: "+accounting.formatMoney($diffValor, opt1);
		}else{
			$textoValor	= "Tem rateado um valor a maior de: "+accounting.formatMoney(($diffValor*-1), opt1);
		}
		
		$htmlValor	= '&nbsp;<span class="" data-rel="zg-popover" data-trigger="hover" data-placement="bottom" title="Somatório dos valores inconsistente" data-content="'+$textoValor+'"><i class="fa fa-exclamation-circle red bigger-140"></i></span>';
		$vOK		= false;
	}
	
	if ($tPct == $cem) {
		$htmlPct 	= $htmlOK;
	}else{
		var $textoPct;
		var	$diffPct	= ($cem - $tPct);
		
		if ($diffPct > 0) {
			$textoPct	= "Falta ratear ainda: "+accounting.formatMoney($diffPct, opt2)+ "%";
		}else{
			$textoPct	= "Tem rateado um percentual a maior de: "+accounting.formatMoney(($diffPct*-1), opt2);
		}
		
		$htmlPct	= '&nbsp;<span class="" data-rel="zg-popover" data-trigger="hover" data-placement="bottom" title="Somatório dos Percentuais inconsistente" data-content="'+$textoPct+'"><i class="fa fa-exclamation-circle red bigger-140"></i></span>';
		$vOK		= false;
	}
	
	$tValor	= accounting.formatMoney($tValor, opt1);
	$tPct	= accounting.formatMoney($tPct, opt2);
	
	$('#tableTotalCellID').html($tValor + $htmlValor);
	$('#tablePctCellID').html($tPct + $htmlPct);
	$('[data-rel=zg-popover]').popover({html:true});
	
	return $vOK;
	
}


function selecionaTipoRecCPAlt() {
	var vTipoRec 		= $('#codTipoRecID').val();
	
	if (vTipoRec	== 'U') {
		selecionaContaUnicaCPAlt();
	}else if (vTipoRec	== 'P') {
		selecionaContaParceladaCPAlt();
	}
}

function selecionaContaUnicaCPAlt() {
	$('#codTipoRecUID').addClass("btn-primary");
	$('#codTipoRecUID').removeClass("btn-light");
	$('#codTipoRecPID').addClass("btn-light");
	$('#codTipoRecPID').removeClass("btn-primary");
	$('#codTipoRecID').val("U");
	mostraDivRecParcelaCPAlt();
}

function selecionaContaParceladaCPAlt() {
	$('#codTipoRecPID').addClass("btn-primary");
	$('#codTipoRecPID').removeClass("btn-light");
	$('#codTipoRecUID').addClass("btn-light");
	$('#codTipoRecUID').removeClass("btn-primary");
	$('#codTipoRecID').val("P");
	mostraDivRecParcelaCPAlt();
}


function calculaPctCellRateioCPAlt(pObj) {
	var	$td			= pObj.parent();
	var $tr			= $td.parent();
	var $total		= getValorParcelaCPAlt().replace(".", "").replace(",",".");
	var $valor		= parseFloat(pObj.val().replace(".", "").replace(",","."));
	var $pct		= parseFloat(($valor * 100 / $total).toFixed(2));
	var $pctTotal	= 0;

	var options = {
		symbol : "",
		decimal : ",",
		thousand: ".",
		precision : 2,
		format: "%s%v"
	};
		
	$pct	= accounting.formatMoney($pct, options);
	
	
	$tr.find('[name*="pctRateio[]"]').each(function( index ) {
		$(this).val($pct);
		$( this ).trigger('keyup');
	});
	
	$('#CPAltTableRateioID > tbody > tr [name*="pctRateio[]"]').each(function( index ) {
		$pctTotal += parseFloat($(this).val().replace(".", "").replace(",","."));
	});

	/** Verifica se ficou uma diferença de arredondamento **/
	$dif	= $pctTotal - 100;
	
	if (($dif > 0 && $dif < 0.02) || ($dif < 0 && $dif > -0.02) ) {

		/** Atualiza o valor com a diferença **/
		$pct	= parseFloat($pct.replace(".", "").replace(",",".")) - $dif;
		$pct	= accounting.formatMoney($pct, options);
		
		$tr.find('[name*="pctRateio[]"]').each(function( index ) {
			$(this).val($pct);
			$( this ).trigger('keyup');
		});
	}

	atualizaEValidaTotalTabelaRateioCPAlt();
}

function calculaValorCellRateioCPAlt(pObj) {
	var	$td			= pObj.parent();
	var $tr			= $td.parent();
	var $total		= getValorParcelaCPAlt().replace(".", "").replace(",",".");
	var $pct		= parseFloat(pObj.val().replace(".", "").replace(",","."));
	var $valor		= (parseFloat($total) * $pct / 100);
	var $valTotal 	= 0;
	var $dif		= 0;

	var options = {
		symbol : "",
		decimal : ",",
		thousand: ".",
		precision : 2,
		format: "%s%v"
	};
		
	
	$valor	= accounting.formatMoney($valor, options);
	
	$tr.find('[name*="valorRateio[]"]').each(function( index ) {
		$(this).val($valor);
		$( this ).trigger('keyup');
	});
	

	$('#CPAltTableRateioID > tbody > tr [name*="valorRateio[]"]').each(function( index ) {
		$valTotal += parseFloat($(this).val().replace(".", "").replace(",","."));
	});

	/** Verifica se ficou uma diferença de arredondamento **/
	$dif	= $valTotal - $total;
	
	if (($dif > 0 && $dif < 0.02) || ($dif < 0 && $dif > -0.02) ) {
		/** Atualiza o valor com a diferença **/
		$valor	= parseFloat($valor.replace(".", "").replace(",",".")) - $dif;
		$valor	= accounting.formatMoney($valor, options);
		
		$tr.find('[name*="valorRateio[]"]').each(function( index ) {
			$(this).val($valor);
			$( this ).trigger('keyup');
		});
	}

	atualizaEValidaTotalTabelaRateioCPAlt();
}

function getValorTotalCPAlt() {
	var $tipoRecParc		= $('#codTipoRecID').val();
	var $codTipoValor		= $('#codTipoValorID').val();
	var $numParcelas		= parseInt($('#numParcelasID').val());
	var $parcelaInicial		= parseInt($('#parcelaInicialID').val());
	var $tipo,$parcelas;
	var $nValor,$valor,$valorJuros,$valorMora,$valorDesc,$valorOutros,$valorParcela,$valorCancelado;
	
	$valor			= parseFloat($('#valorID').val().replace(".", "").replace(",","."));
	$valorJuros		= parseFloat($('#valorJurosID').val().replace(".", "").replace(",","."));
	$valorMora		= parseFloat($('#valorMoraID').val().replace(".", "").replace(",","."));
	$valorDesc		= parseFloat($('#valorDescontoID').val().replace(".", "").replace(",","."));
	$valorCancelado	= parseFloat($('#valorCanceladoID').val().replace(".", "").replace(",","."));
	$valorOutros	= parseFloat($('#valorOutrosID').val().replace(".", "").replace(",","."));
	
	if (isNaN($valor))			$valor			= 0;
	if (isNaN($valorJuros))		$valorJuros		= 0;
	if (isNaN($valorMora))		$valorMora 		= 0;
	if (isNaN($valorDesc))		$valorDesc 		= 0;
	if (isNaN($valorOutros))	$valorOutros 	= 0;
	
	$nValor			= ($valor + $valorJuros + $valorMora + $valorOutros - ($valorDesc+$valorCancelado) ).toFixed(2);

	if ($tipoRecParc	== 'P') {
		var $parcelas	= $numParcelas - ($parcelaInicial -1);
		
		if ($codTipoValor == 'P') {
			$nValor			= ($parcelas * $valor).toFixed(2);
		}
	}

	var options = {
		symbol : "",
		decimal : ",",
		thousand: ".",
		precision : 2,
		format: "%s%v"
	};
	
	$nValor			= accounting.formatMoney($nValor, options);
	return ($nValor);
	
	
}

function getValorParcelaCPAlt() {
	var $tipoRecParc		= $('#codTipoRecID').val();
	var $codTipoValor		= $('#codTipoValorID').val();
	var $numParcelas		= parseInt($('#numParcelasID').val());
	var $parcelaInicial		= parseInt($('#parcelaInicialID').val());
	var $tipo,$parcelas;
	var $nValor,$valor,$valorJuros,$valorMora,$valorDesc,$valorOutros,$valorParcela,$valorCancelado;
	
	$valor			= parseFloat($('#valorID').val().replace(".", "").replace(",","."));
	$valorJuros		= parseFloat($('#valorJurosID').val().replace(".", "").replace(",","."));
	$valorMora		= parseFloat($('#valorMoraID').val().replace(".", "").replace(",","."));
	$valorDesc		= parseFloat($('#valorDescontoID').val().replace(".", "").replace(",","."));
	$valorCancelado	= parseFloat($('#valorCanceladoID').val().replace(".", "").replace(",","."));
	$valorOutros	= parseFloat($('#valorOutrosID').val().replace(".", "").replace(",","."));
	
	if (isNaN($valor))			$valor			= 0;
	if (isNaN($valorJuros))		$valorJuros		= 0;
	if (isNaN($valorMora))		$valorMora 		= 0;
	if (isNaN($valorDesc))		$valorDesc 		= 0;
	if (isNaN($valorOutros))	$valorOutros 	= 0;
	
	$nValor			= ($valor + $valorJuros + $valorMora + $valorOutros - ($valorDesc + $valorCancelado)).toFixed(2);

	if ($tipoRecParc	== 'P') {
		var $parcelas	= $numParcelas - ($parcelaInicial -1);
		
		if ($codTipoValor == 'T') {
			$nValor		= ($nValor / $parcelas).toFixed(2);
		}
	}

	var options = {
		symbol : "",
		decimal : ",",
		thousand: ".",
		precision : 2,
		format: "%s%v"
	};
	
	$nValor			= accounting.formatMoney($nValor, options);
	return ($nValor);
	
	
}



/** Controle de ações **/

function calculaAcoesBotoesCPAlt() {
	var $podeImp,$podeCan,$podeCon,$podeHis,$podeExc;
	var $indSomenteVis			= $('#indSomenteVisID').val();

	switch ($('#codStatusID').val()) {
	case "A":
		$podeImp	= true;
		$podeCan	= ($indSomenteVis) ? false : true;
		$podeCon	= ($indSomenteVis) ? false : true;
		$podeHis	= false;
		$podeExc	= ($indSomenteVis) ? false : true;
		break;
	case "C":
		$podeImp	= false;
		$podeCan	= false;
		$podeCon	= false;
		$podeHis	= true;
		$podeExc	= ($indSomenteVis) ? false : true;
		break;
	case "L":
		$podeImp	= true;
		$podeCan	= false;
		$podeCon	= false;
		$podeHis	= true;
		$podeExc	= false;
		break;
	case "S":
		$podeImp	= false;
		$podeCan	= false;
		$podeCon	= false;
		$podeHis	= false;
		$podeExc	= false;
		break;
	case "P":
		$podeImp	= true;
		$podeCan	= ($indSomenteVis) ? false : true;
		$podeCon	= ($indSomenteVis) ? false : true;
		$podeHis	= true;
		$podeExc	= false;
		break;
	default:
		$podeImp	= false;
		$podeCan	= false;
		$podeCon	= false;
		$podeHis	= false;
		$podeExc	= false;
		break;
}
	
	var $urlImp		= "%ROOT_URL%/Fin/contaPagarImp.php?id="+zgEncodeUrl("_codMenu_=%COD_MENU%&_icone_=%IC%&urlVoltar=%URL_EDITAR%&codConta="+$('#codContaID').val());
	var $urlCan		= "%ROOT_URL%/Fin/contaPagarCan.php?id="+zgEncodeUrl("_codMenu_=%COD_MENU%&_icone_=%IC%&urlVoltar=%URL_EDITAR%&codConta="+$('#codContaID').val());
	var $urlCon		= "%ROOT_URL%/Fin/contaPagarPag.php?id="+zgEncodeUrl("_codMenu_=%COD_MENU%&_icone_=%IC%&urlVoltar=%URL_EDITAR%&codConta="+$('#codContaID').val());
	var $urlHis		= "%ROOT_URL%/Fin/contaPagarHis.php?id="+zgEncodeUrl("_codMenu_=%COD_MENU%&_icone_=%IC%&urlVoltar=%URL_EDITAR%&codConta="+$('#codContaID').val());
	var $urlExc		= "%ROOT_URL%/Fin/contaPagarExc.php?id="+zgEncodeUrl("_codMenu_=%COD_MENU%&_icone_=%IC%&urlVoltar=%URL_EDITAR%&codConta="+$('#codContaID').val());

	$('#btnImpID').unbind('click');
	$('#btnCanID').unbind('click');
	$('#btnConID').unbind('click');
	$('#btnHisID').unbind('click');
	$('#btnExcID').unbind('click');

	$('#btnImpID').click(function(){
		zgAbreModal($urlImp);
	});
	$('#btnCanID').click(function(){
		zgAbreModal($urlCan);
	});
	$('#btnConID').click(function(){
		zgAbreModal($urlCon);
	});
	$('#btnHisID').click(function(){
		zgAbreModal($urlHis);
	});
	$('#btnExcID').click(function(){
		zgAbreModal($urlExc);
	});
	
	($podeImp == true) ? $('#btnImpID').removeAttr("disabled") : $('#btnImpID').attr('disabled','disabled');
	($podeCan == true) ? $('#btnCanID').removeAttr("disabled") : $('#btnCanID').attr('disabled','disabled');
	($podeCon == true) ? $('#btnConID').removeAttr("disabled") : $('#btnConID').attr('disabled','disabled');
	($podeHis == true) ? $('#btnHisID').removeAttr("disabled") : $('#btnHisID').attr('disabled','disabled');
	($podeExc == true) ? $('#btnExcID').removeAttr("disabled") : $('#btnExcID').attr('disabled','disabled');

}

calculaAcoesBotoesCPAlt();
mostraInfoCancCPAlt();
selecionaTipoRecCPAlt();

atualizaInfoRecorrenciaCPAlt();
atualizaInfoIdentCPAlt();
atualizaInfoValorCPAlt();
atualizaDivPagaCPAlt();
atualizaInfoFormaPagCPAlt();
atualizaInfoContaPagCPAlt();
atualizaInfoCategoriaCPAlt();
atualizaInfoCentroCustoCPAlt();
atualizaInfoFornecCPAlt();

function mostraInfoCancCPAlt() {
	var $valorCancelado	= $('#valorCanceladoID').val();

	if (parseFloat($valorCancelado) > 0) {
		$('#divInfoCancID').show();
		$('#divValorCanceladoID').show();
	}else{
		$('#divInfoCancID').hide();
		$('#divValorCanceladoID').hide();
	}
}


function mostraDivRecParcelaCPAlt() {
	var vTipoRec 		= $('#codTipoRecID').val();
	
	if (vTipoRec 	== 'U') {
		$('#divRecParcelaID').hide();
	}else if (vTipoRec 	== 'P') {
		$('#divRecParcelaID').show();
	}else{
		$('#divRecParcelaID').hide();
	}
}

function validaIdentificacaoCPAlt() {
	var $descricao		= $('#descricaoID').val();
	var $dataVenc		= $('#dataVencID').val();
	var vOK				= true;
	
	$('#divDescricaoID').removeClass('has-error');
	$('#divDataVencID').removeClass('has-error');
		
	$('#divHelpDescricaoID').html('');
	$('#divHelpDataVencID').html('');

	if (!$descricao) {
		$('#divDescricaoID').addClass('has-error');
		$('#divHelpDescricaoID').html('"Descriçao" deve ser preenchida !!');
		vOK			= false;
	}else if ($descricao.length > 60) {
		$('#divDescricaoID').addClass('has-error');
		$('#divHelpDescricaoID').html('"Descrição" deve conter no máximo 60 caracteres');
		vOK			= false;
	}else if ($descricao.length < 2) {
		$('#divDescricaoID').addClass('has-error');
		$('#divHelpDescricaoID').html('"Descrição" deve conter no mínimo 2 caracteres');
		vOK			= false;
	}

	
	if (!$dataVenc) {
		$('#divDataVencID').addClass('has-error');
		$('#divHelpDataVencID').html('"Data de Vencimento" deve ser preenchida !!');
		vOK			= false;
	}else if (isDataBR($dataVenc) == false) {
		$('#divDataVencID').addClass('has-error');
		$('#divHelpDataVencID').html('"Data de Vencimento" inválida !!');
		vOK			= false;
	}

	
	if (vOK) {
		atualizaInfoIdentCPAlt();
	}
	
	return vOK;
}

function validaValoresCPAlt() {
	var $valor			= $('#valorID').val();
	var $juros			= $('#valorJurosID').val();
	var $mora			= $('#valorMoraID').val();
	var $desconto		= $('#valorDescontoID').val();
	var $outros			= $('#valorOutrosID').val();
	
	
	var vOK				= true;
	
	$('#divValorID').removeClass('has-error');
	$('#divJurosID').removeClass('has-error');
	$('#divMoraID').removeClass('has-error');
	$('#divDescontoID').removeClass('has-error');
	$('#divOutrosID').removeClass('has-error');
		
	$('#divHelpValorID').html('');
	$('#divHelpJurosID').html('');
	$('#divHelpMoraID').html('');
	$('#divHelpDescontoID').html('');
	$('#divHelpOutrosID').html('');
	
	if (!$valor) {
		$('#divValorID').addClass('has-error');
		$('#divHelpValorID').html('"Valor" deve ser preenchido !!');
		vOK			= false;
	}else if ($valor == 0) {
		$('#divValorID').addClass('has-error');
		$('#divHelpValorID').html('"Valor" deve ser maior que 0');
		vOK			= false;
	}else if (isMoney($valor) == false) {
		$('#divValorID').addClass('has-error');
		$('#divHelpValorID').html('"Valor" deve ser numérico');
		vOK			= false;
	}

	if (($juros) && (isMoney($juros) == false)) {
		$('#divJurosID').addClass('has-error');
		$('#divHelpJurosID').html('"Juros" deve ser numérico !!');
		vOK			= false;
	}

	if (($mora) && (isMoney($mora) == false)) {
		$('#divMoraID').addClass('has-error');
		$('#divHelpMoraID').html('"Mora" deve ser numérico !!');
		vOK			= false;
	}

	if (($desconto) && (isMoney($desconto) == false)) {
		$('#divDescontoID').addClass('has-error');
		$('#divHelpDescontoID').html('"Desconto" deve ser numérico !!');
		vOK			= false;
	}

	if (($outros) && (isMoney($outros) == false)) {
		$('#divOutrosID').addClass('has-error');
		$('#divHelpOutrosID').html('"Outros Valores" deve ser numérico !!');
		vOK			= false;
	}

	$('#difValorID').val($('#difValorTempID').val());

	
	return vOK;

}


function atualizaInfoRecorrenciaCPAlt() {
	var $tipoRecParc	= $('#codTipoRecID').val();
	var $numParcelas	= parseInt($('#numParcelasID').val());
	var $parcelaInicial	= parseInt($('#parcelaInicialID').val());
	var $codPeriodoRec	= $("#codPeriodoRecID option:selected").text();
	var	$parcela		= $("#codParcelaID").val();
	var $tipo,$parcelas;
	
	if ($tipoRecParc	== 'P') {
		$tipo			= "Parcelada";
		$parcelas		= $numParcelas - ($parcelaInicial - 1);
		
		$('#lbInfoRecorrenciaID').text($codPeriodoRec);
		$('#lbInfoNumParcelasID').text("("+$parcela+"/"+$parcelas+")");
		
		$('#divInfoRecorrenciaID').removeClass('hidden');
		$('#divInfoNumParcelasID').removeClass('hidden');
		
	}else{
		$tipo			= "Fixa";
	}
	
	$('#lbInfoTipoContaID').text($tipo);
	$('#divInfoTipoContaID').removeClass('hidden');
	
}

function atualizaInfoIdentCPAlt() {
	var $ident		= $('#descricaoID').val();
	var $venc		= $('#dataVencID').val();
	
	$('#lbInfoIdentID').text($ident);
	$('#lbInfoDataVencID').text($venc);

	$('#divInfoIdentID').removeClass('hidden');
	$('#divInfoDataVencID').removeClass('hidden');
}


function atualizaInfoValorCPAlt() {
	var	$nValor		= getValorParcelaCPAlt();
	var $valor		= $('#valorID').val();
	if (!$valor) return null;
	
	$('#lbInfoValorID').html($nValor);
	$('#divInfoValorID').removeClass('hidden');

}

function atualizaDivPagaCPAlt() {
	var $venc			= $('#dataVencID').val();
	var $tipoRecParc	= $('#codTipoRecID').val();
	var $numParcelas	= parseInt($('#numParcelasID').val());
	var $parcelaInicial	= parseInt($('#parcelaInicialID').val());
	var $codPeriodoRec	= $('#codPeriodoRecID').val();
	var $intervaloRec	= parseInt($('#intervaloRecID').val());
	var $dia,$mes,$ano,$temp,$oHoje,$oVencIni,$oVencFim,$diff,$parcFuturas;
	
	$temp	= $venc.split('/');
	$dia	= parseInt($temp[0]);
	$mes	= parseInt($temp[1]) - 1;
	$ano	= parseInt($temp[2]);

	$oVencIni	= new Date($ano,$mes,$dia);
	$oHoje		= new Date();
	$oHoje.setHours(0,0,0,0);
	
	$('#divFlagPagarAutoID').addClass('hidden');
	$('#divFlagPagaID').addClass('hidden');
	
	if ($tipoRecParc	== 'P') {
		$parcFuturas		= $numParcelas - ($parcelaInicial - 1) -1;
		
		if ($codPeriodoRec == "D") {
			$oVencFim	= new Date($ano,$mes,$dia + ($parcFuturas * $intervaloRec) );
		}else if ($codPeriodoRec == "S") {
			$oVencFim	= new Date($ano,$mes,$dia + ($parcFuturas * $intervaloRec * 7) );
		}else if ($codPeriodoRec == "M") {
			$oVencFim	= new Date($ano,$mes + ($parcFuturas * $intervaloRec),$dia );
		}else if ($codPeriodoRec == "A") {
			$oVencFim	= new Date($ano + ($parcFuturas * $intervaloRec),$mes,$dia );
		}else{
			alert('Erro: Período de Recorrência não tratado !!!');
			$('#divFlagPagarAutoID').removeClass('hidden');
			$('#divFlagPagaID').removeClass('hidden');
			return null;
		}
		
		if ($oVencIni <= $oHoje) {
			$('#divFlagPagaID').removeClass('hidden');
		}

		if ($oVencFim > $oHoje) {
			$('#divFlagPagarAutoID').removeClass('hidden');
		}
		
	}else{
		if ($oVencIni > $oHoje) {
			$('#divFlagPagarAutoID').removeClass('hidden');
		}else{
			$('#divFlagPagaID').removeClass('hidden');
		}
	}
	
	
	
}

function atualizaInfoFormaPagCPAlt() {
	var $desc	= $("#codFormaPagID option:selected").text();
	if ($desc)	{
		$('#lbInfoFormaPagID').html($desc);
		$('#divInfoConfID').removeClass('hidden');
		$('#divInfoFormaPagID').removeClass('hidden');
	}
}

function atualizaInfoContaPagCPAlt() {
	var $desc	= $("#codContaPagID option:selected").text();
	
	var options = {
			symbol : "R$ ",
			decimal : ",",
			thousand: ".",
			precision : 2,
			format: "%s%v"
	};
	
	if ($desc)	{
		$('#lbInfoContaPagID').html($desc);
		$('#divInfoConfID').removeClass('hidden');
		$('#divInfoContaPagID').removeClass('hidden');
		
		
		$.ajax({
			url: "%ROOT_URL%/Fin/getSaldoConta.dp.php",
			data:  { codConta: $('#codContaPagID').val()},
			success: function(data) {
				var $saldo	= data["saldo"];
				var $desc;
				
				if ($saldo > 0) {
					$desc	= "<span class='text-success'>"+accounting.formatMoney($saldo, options)+"</span>";
				}else{
					$desc	= "<strong>(&nbsp;<span class='text-danger'>"+accounting.formatMoney($saldo, options)+"</span>&nbsp;)</strong>";
				}
				
				$('#lbInfoSaldoContaID').html($desc);
				$('#divInfoSaldoContaID').removeClass('hidden');
		    },
			dataType: 'json'
		});
	}
}

function atualizaInfoCategoriaCPAlt() {
	var $desc	= $("#codCategoriaID option:selected").text();
	if ($desc)	{
		$('#lbInfoCategoriaID').html($desc);
		$('#divInfoConfID').removeClass('hidden');
		$('#divInfoCategoriaID').removeClass('hidden');
	}
}

function atualizaInfoCentroCustoCPAlt() {
	var $desc	= $("#codCentroCustoID option:selected").text();
	if ($desc)	{
		$('#lbInfoCentroCustoID').html($desc);
		$('#divInfoConfID').removeClass('hidden');
		$('#divInfoCentroCustoID').removeClass('hidden');
	}
}

function atualizaInfoFornecCPAlt($desc) {
	if ($desc)	{
		$('#lbInfoPessoaID').html($desc);
		$('#divInfoConfID').removeClass('hidden');
		$('#divInfoPessoaID').removeClass('hidden');
	}
}

</script>
